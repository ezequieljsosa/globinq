{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f742f55dd75adf5c3aa1","webpack:///./src/model/style/StickStyle.js","webpack:///./src/model/style/SphereStyle.js","webpack:///./src/model/colorer/AtomColorer.js","webpack:///./src/GLmol.js","webpack:///./src/model/Pocket.js","webpack:///./src/model/SBGGLMol.js","webpack:///./src/model/Layer.js","webpack:///./src/model/style/CartoonStyle.js","webpack:///./src/index.js","webpack:///./src/utils/SBGBuilder.js","webpack:///./src/utils/SBGParser.js","webpack:///./src/model/colorer/ByAtomColorer.js"],"names":["StickStyle","colorer","bondRadius","atomRadius","ignoreNonbonded","multipleBonds","scale","glmol","atoms","color","drawBondsAsStick","modelGroup","SphereStyle","sphereRadius","drawAtomsAsSphere","thickness","AtomColorer","_color","colorAtoms","TV3","THREE","Vector3","TF3","Face3","TCo","Color","vs_billboard","fs_billboard","GLmol","id","suppressAutoload","selected_atoms_color","parseInt","selected_atoms","layers","atom_labels","selected_atoms_bond_renderer","selected_atoms_renderer","create","Nucleotides","ElementColors","vdwRadii","aaScale","container","$","WIDTH","width","HEIGHT","height","ASPECT","NEAR","FAR","CAMERA_Z","renderer","WebGLRenderer","antialias","sortObjects","domElement","style","append","setSize","camera","PerspectiveCamera","position","lookAt","perspectiveCamera","orthoscopicCamera","OrthographicCamera","z","self","window","resize","aspect","updateProjectionMatrix","show","scene","rotationGroup","bgColor","fov","fogStart","slabNear","slabFar","cylinderRadius","lineWidth","curveWidth","defaultColor","sphereQuality","cylinderQuality","axisDIV","strandDIV","nucleicAcidStrandDIV","tubeDIV","coilWidth","helixSheetWidth","nucleicAcidWidth","cq","Quaternion","dq","isDragging","mouseStartX","mouseStartY","currentModelPos","cz","enableMouse","loadMolecule","directionalLight","DirectionalLight","normalize","intensity","add","ambientLight","AmbientLight","str","protein","lines","split","length","atomCount","substr","isNaN","bondCount","offset","i","line","atom","serial","x","parseFloat","y","hetflag","elem","replace","bonds","bondOrder","from","to","order","push","smallMolecule","tokens","console","log","j","isConnected","molID","atoms_cnt","recordName","resn","chain","resi","altLoc","b","test","startChain","startResi","endChain","endResi","sheet","undefined","helix","a","c","alpha","beta","gamma","spacegroup","defineCell","type","n","m","symMat","Matrix4","identity","elements","biomtMatrices","biomtChains","pdbID","title","found","ss","ssbegin","ssend","_points","DIV","ret","points","Array","lim","p1","p2","smoothen","size","p0","p3","v0","sub","multiplyScalar","v1","t","group","atomlist","defaultRadius","forceDefault","sphereGeometry","SphereGeometry","sphereMaterial","MeshLambertMaterial","sphere","Mesh","r","geo","IcosahedronGeometry","mat","atom1","atom2","s","indexOf","distSquared","bondR","delta","tmp","calcBondDelta","mp","clone","addSelf","c1","c2","drawCylinder","subSelf","atomR","nAtoms","forSpheres","_i","_j","connected","drawBondAsStickSub","p","ax","ay","az","bx","Math","cos","PI","by","sin","bz","cx","cy","sqrt","vertices","edges","Geometry","lineMaterial","LineBasicMaterial","linewidth","Line","LinePieces","sep","dot","axis","abs","vs","cs","colors","drawBondsAsLineSub","vertexColors","div","subdivide","round","LineStrip","radii","circleDiv","axisDiv","prevAxis1","prevAxis2","idx","floored","floor","axis1","axis2","cross","negate","angle","reg","r1","lengthSq","r2","faces","computeFaceNormals","computeVertexNormals","FaceColors","mesh","doubleSided","atomName","currentChain","currentResi","drawSmoothCurve","radius","drawSmoothTube","drawThinStrip","fs","p1v","p2v","a1v","a2v","toNext","toSide","crossSelf","f","Face4","vsize","material","icosahedron","cap","midpoint","cylinderGeometry","CylinderGeometry","faceUvs","faceVertexUvs","cylinderMaterial","getHex","cylinder","updateMatrix","matrixAutoUpdate","makeScale","distanceTo","rotateX","matrix","multiplySelf","start","others","drawMainchainTube","drawStrand","doNotSmoothen","num","fill","k","currentCA","prevCO","ssborder","drawStrip","ssstart","O","v","lineGeo","baseFaceId","baseAtoms","currentComponent","drawNucleicAcidLadderSub","pos","VertexColors","end","linejoin","drawStrandNucleicAcid","currentO3","prevOO","step","dist","jlim","deleteList","blackList","Object","extent","xmin","ymin","zmin","xmax","ymax","zmax","xsum","ysum","zsum","cnt","chains","toString","helixColor","sheetColor","colorSidechains","minB","maxB","mid","range","setHSV","charCodeAt","residueColors","polar","nonpolar","polarResidues","nonPolarResidues","colorMap","colorByResidue","total","asu","matrices","appliedMatrix","isIdentity","symmetryMate","SceneUtils","cloneObject","translationMat","makeTranslation","symop","text","canvas","document","createElement","backgroundColor","ctx","getContext","font","measureText","fillStyle","strokeStyle","fillText","tex","Texture","needsUpdate","magFilter","minFilter","LinearFilter","bbmesh","UV","getBillboardMesh","sm","ShaderMaterial","uniforms","map","value","texture","image","vertexShader","fragmentShader","all","getAllAtoms","hetatm","removeSolvents","getHetatms","colorByAtom","colorByChain","drawMainchainCurve","drawCartoon","q","quaternion","w","arg","hex","setClearColorHex","fog","Scene","Fog","Object3D","useQuaternion","setupLights","keepSlab","getExtent","center","multiplyVector3","maxD","tan","time","Date","view","getView","initializeScene","defineRepresentation","setView","repressZoom","loadMoleculeStr","val","source","parsePDB2","parseSDF","parseXYZ","titleStr","html","rebuildScene","zoomInto","near","far","right","left","top","bottom","ev","pageX","pageY","originalEvent","targetTouches","obj","vector","widthHalf","heightHalf","pepe","projectVector","me","glDOM","bind","preventDefault","adjustPos","mouseButton","which","cslabNear","cslabFar","scaleFactor","detail","wheelDelta","dx","dy","mvMat","multmultiplySelf","amera","matrixWorldInverse","matrixWorld","pmvMat","multiply","projectionMatrix","pmvMatInv","getInverse","tx","ty","nearest","ilim","applyProjection","e","d","juan","bb","billboard","createTextTex","set","mode","modeRadio","ctrlKey","shiftKey","translationByScreen","qinv","inverse","translation","rs","setSlabAndFog","render","func","res_ids","isArray","grep","join","residue_atoms","refreshAll","atmIndexes","each","atm","_render_selected","layer","atomsIndex","atom_serial","atom_name_list","getAtomsByName","data","unique","sort","pdb_str","arr","foo","alpha_pol","alpha_apol","l","atoms_id","_draw_labels","atom_id","atom_label_id","offsetX","offsetY","remove","Pocket","name","alpha_spheres","visible","PocketStyle","show_alpha_spheres","SBGGLMol","supress","data_loaded","Layer","show_labels","draw_labels","CartoonStyle","ShaderLib","lambert","replaceValue","prototype","colorAll","SBGBuilder","default_chain_colors","_urls","_data","_download_fail","alert","_data_loaded_fn","sbgglmol","_div_name","parser","pockets_to_load","pockets_data","pdb_strs_to_add","_load_urls","reverse","_build","urls","url_handler","pop","get","done","fail","_execute_cascade_url","handler","params","url_groups","apply","url","success","div_name","pdb","_build_first_phase","div_id","layer_list_id","pocket_name","url_pdb_str_residues","url_pdb_str_alphaSpheres","_handle_pocket_data","pocket_atoms_str","pocket_alpha_spheres_str","add_pdb_str","pocket_atom_index_list","alpha_spheres_index_list","atomIds_from_pdb","pocket","add_layer","load_data","_init_click_event","_default_init","_init_chains","_init_heatoms","_init_pockets","_init_controls","pocket_arr","raw_str_alpha_spheres","str_alpha_spheres","alpha_spheres_from_pdb","load_pocket","_layer_list","UILayerList","init","chain_style","chain_atoms","heatoms","removeAlphaSpheres","ByAtomColorer","SBGParser","substring","trim","pdbLine","atom_index_list","isATOMLine","isHETATMLine","atomSeq","_atom_from_line","pocket_numbers","pocket_number","isAlphaSphereLine","_residue_from_line","isDefAndNotNull","pocket_alpha_spheres","color_map","atom_color_map"],"mappings":"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","file":"sbgglmol.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"sbgglmol\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"sbgglmol\"] = factory();\n\telse\n\t\troot[\"sbgglmol\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f742f55dd75adf5c3aa1","export class StickStyle {\n\tconstructor(colorer) {\n\n\tthis.colorer = colorer;\n\tthis.bondRadius = 0.2;\n\tthis.atomRadius = 0.4;\n\tthis.ignoreNonbonded = true;\n\tthis.multipleBonds = false;\n\tthis.scale = 0.3;\n\t}\n\n\trender(glmol, atoms) {\n\t\tthis.colorer.color(glmol, atoms)\n\t\t//var residues = glmol.getResidues(atoms);\n\t\tglmol.drawBondsAsStick(glmol.modelGroup, atoms, this.bondRadius,\n\t\t\t\tthis.atomRadius, this.ignoreNonbonded, this.multipleBonds,\n\t\t\t\tthis.scale);\n\t}\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/style/StickStyle.js","export class SphereStyle { \n\tconstructor(colorer, sphereRadius) {\n\tthis.colorer = colorer;\n\tthis.sphereRadius = sphereRadius;\n}\n\n\n\trender (glmol, atoms) {\n\t\tthis.colorer.color(glmol, atoms)\n\t\tglmol.drawAtomsAsSphere(glmol.modelGroup, atoms, this.sphereRadius,this.sphereRadius * glmol.thickness );\n\t}\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/style/SphereStyle.js","export class AtomColorer  { \n\tconstructor(color) {\n\n\tthis._color = color\n}\n\n\n\tcolor (glmol, atoms) {\n\t\tglmol.colorAtoms(atoms, this._color);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/colorer/AtomColorer.js","/*\n GLmol - Molecular Viewer on WebGL/Javascript (0.47)\n  (C) Copyright 2011-2012, biochem_fan\n      License: dual license of MIT or LGPL3\n\n  Contributors:\n    Robert Hanson for parseXYZ, deferred instantiation\n\n  This program uses\n      Three.js \n         https://github.com/mrdoob/three.js\n         Copyright (c) 2010-2012 three.js Authors. All rights reserved.\n      jQuery\n         http://jquery.org/\n         Copyright (c) 2011 John Resig\n */\n\n// Workaround for Intel GMA series (gl_FrontFacing causes compilation error)\n\nimport {StickStyle} from './model/style/StickStyle.js'\nimport {SphereStyle} from './model/style/SphereStyle.js'\nimport {Pocket} from './model/Pocket.js'\nimport {AtomColorer} from './model/colorer/AtomColorer.js'\n\nlet TV3 = THREE.Vector3, TF3 = THREE.Face3, TCo = THREE.Color;\n\nconst vs_billboard = \"uniform float width, height;\\nvarying vec2 vUv;\\n\" +\n\"void main() {\\n mat4 mv = modelViewMatrix;\\n mv[0][0] = mv[1][1] = mv[2][2] = 1.0;\\n\" +\n\"mv[0][1] = mv[0][2] = mv[1][0] = mv[1][2] = mv[2][0] =  mv[2][1] = 0.0;\\n\"+\n\"mat4 mat = projectionMatrix * mv;\\n vUv = uv;\\n\"+\n\"float aspect = projectionMatrix[1][1] / projectionMatrix[0][0];\\n\"+\n\"gl_Position = mat * vec4(position, 1.0);\\n gl_Position /= gl_Position.w;\\n\"+\n\"gl_Position += vec4(uv.x * width / 1000.0, uv.y * height * aspect / 1000.0, 0.0, 0.0);\\n\"+\n\"gl_Position.z = -0.9;\\n}\";\n\nconst fs_billboard = \"uniform sampler2D map;\\n varying vec2 vUv;\\n\"+\n\"void main() {\\n gl_FragColor = texture2D(map, vec2(vUv.x, 1.0 - vUv.y));\\n\"+\n\"if (gl_FragColor.a < 0.5) discard;// else gl_FragColor = vec4(1.0, 1.0, 1.0, gl_FragColor.a);\\n }\";\n\n\n\nexport class GLmol {\n \n constructor(id, suppressAutoload) {\n\t this.selected_atoms_color = parseInt( \"0x9F00FF\" )\n     this.selected_atoms = [];    \n     this.layers = []\n     this.selected_atoms = []\n     this.atom_labels = []\n     this.selected_atoms_bond_renderer = new StickStyle(\n         new AtomColorer( this.selected_atoms_color ) );\n     this.selected_atoms_renderer = new SphereStyle( new AtomColorer(\n         this.selected_atoms_color ), 0.1 );\n     \n   if (id) {this.create(id, suppressAutoload)};\n  \n}\n\ncreate(id, suppressAutoload) {\n   this.Nucleotides = ['  G', '  A', '  T', '  C', '  U', ' DG', ' DA', ' DT', ' DC', ' DU'];\n   this.ElementColors = {\"H\": 0xCCCCCC, \"C\": 0xAAAAAA, \"O\": 0xCC0000, \"N\": 0x0000CC, \"S\": 0xCCCC00, \"P\": 0x6622CC,\n                         \"F\": 0x00CC00, \"CL\": 0x00CC00, \"BR\": 0x882200, \"I\": 0x6600AA,\n                         \"FE\": 0xCC6600, \"CA\": 0x8888AA};\n// Reference: A. Bondi, J. Phys. Chem., 1964, 68, 441.\n   this.vdwRadii = {\"H\": 1.2, \"Li\": 1.82, \"Na\": 2.27, \"K\": 2.75, \"C\": 1.7, \"N\": 1.55, \"O\": 1.52,\n                   \"F\": 1.47, \"P\": 1.80, \"S\": 1.80, \"CL\": 1.75, \"BR\": 1.85, \"SE\": 1.90,\n                   \"ZN\": 1.39, \"CU\": 1.4, \"NI\": 1.63};\n\n   this.id = id;\n   this.aaScale = 1; // or 2\n\n   this.container = $('#' + this.id);\n   this.WIDTH = this.container.width() * this.aaScale, this.HEIGHT = this.container.height() * this.aaScale;\n   this.ASPECT = this.WIDTH / this.HEIGHT;\n   this.NEAR = 1, this.FAR = 800;\n   this.CAMERA_Z = -150;\n   this.renderer = new THREE.WebGLRenderer({antialias: true});\n   this.renderer.sortObjects = false; // hopefully improve performance\n   // 'antialias: true' now works in Firefox too!\n   // setting this.aaScale = 2 will enable antialias in older Firefox but GPU\n\t// load increases.\n   this.renderer.domElement.style.width = \"100%\";\n   this.renderer.domElement.style.height = \"100%\";\n   this.container.append(this.renderer.domElement);\n   this.renderer.setSize(this.WIDTH, this.HEIGHT);\n\n   this.camera = new THREE.PerspectiveCamera(20, this.ASPECT, 1, 800); // will\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// be\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// updated\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// anyway\n   this.camera.position = new TV3(0, 0, this.CAMERA_Z);\n   \n   this.camera.lookAt(new TV3(0, 0, 0));\n   this.perspectiveCamera = this.camera;\n   this.orthoscopicCamera = new THREE.OrthographicCamera();\n   this.orthoscopicCamera.position.z = this.CAMERA_Z;\n   this.orthoscopicCamera.lookAt(new TV3(0, 0, 0));\n\n   var self = this;\n   $(window).resize(function() { // only window can capture resize event\n      self.WIDTH = self.container.width() * self.aaScale;\n      self.HEIGHT = self.container.height() * self.aaScale;\n      self.ASPECT = self.WIDTH / self.HEIGHT;\n      self.renderer.setSize(self.WIDTH, self.HEIGHT);\n      self.camera.aspect = self.ASPECT;\n      self.camera.updateProjectionMatrix();\n      self.show();\n   });\n\n   this.scene = null;\n   this.rotationGroup = null; // which contains modelGroup\n   this.modelGroup = null;\n\n   this.bgColor = 0x000000;\n   this.fov = 20;\n   this.fogStart = 0.4;\n   this.slabNear = -50; // relative to the center of rotationGroup\n   this.slabFar = +50;\n\n   // Default values\n   this.sphereRadius = 1.5; \n   this.cylinderRadius = 0.4;\n   this.lineWidth = 1.5 * this.aaScale;\n   this.curveWidth = 3 * this.aaScale;\n   this.defaultColor = 0xCCCCCC;\n   this.sphereQuality = 16; // 16;\n   this.cylinderQuality = 16; // 8;\n   this.axisDIV = 5; // 3 still gives acceptable quality\n   this.strandDIV = 6;\n   this.nucleicAcidStrandDIV = 4;\n   this.tubeDIV = 8;\n   this.coilWidth = 0.3;\n   this.helixSheetWidth = 1.3;\n   this.nucleicAcidWidth = 0.8;\n   this.thickness = 0.4;\n \n   // UI variables\n   this.cq = new THREE.Quaternion(1, 0, 0, 0);\n   this.dq = new THREE.Quaternion(1, 0, 0, 0);\n   this.isDragging = false;\n   this.mouseStartX = 0;\n   this.mouseStartY = 0;\n   this.currentModelPos = 0;\n   this.cz = 0;\n   this.enableMouse();\n\n   if (suppressAutoload) return;\n   this.loadMolecule();\n}\n\nsetupLights (scene) {\n   var directionalLight =  new THREE.DirectionalLight(0xFFFFFF);\n   directionalLight.position = new TV3(0.2, 0.2, -1).normalize();\n   \n   directionalLight.intensity = 1.2;\n   scene.add(directionalLight);\n   var ambientLight = new THREE.AmbientLight(0x202020);\n   scene.add(ambientLight);\n}\n\nparseSDF(str) {\n   var atoms = this.atoms;\n   var protein = this.protein;\n\n   var lines = str.split(\"\\n\");\n   if (lines.length < 4) return;\n   var atomCount = parseInt(lines[3].substr(0, 3));\n   if (isNaN(atomCount) || atomCount <= 0) return;\n   var bondCount = parseInt(lines[3].substr(3, 3));\n   var offset = 4;\n   if (lines.length < 4 + atomCount + bondCount) return;\n   for (var i = 1; i <= atomCount; i++) {\n      var line = lines[offset];\n      offset++;\n      var atom = {};\n      atom.serial = i;\n      atom.x = parseFloat(line.substr(0, 10));\n      atom.y = parseFloat(line.substr(10, 10));\n      atom.z = parseFloat(line.substr(20, 10));\n      atom.hetflag = true;\n      atom.atom = atom.elem = line.substr(31, 3).replace(/ /g, \"\");\n      atom.bonds = [];\n      atom.bondOrder = [];\n      atoms[i] = atom;\n   }\n   for (i = 1; i <= bondCount; i++) {\n      var line = lines[offset];\n      offset++;\n      var from = parseInt(line.substr(0, 3));\n      var to = parseInt(line.substr(3, 3));\n      var order = parseInt(line.substr(6, 3));\n      atoms[from].bonds.push(to);\n      atoms[from].bondOrder.push(order);\n      atoms[to].bonds.push(from);\n      atoms[to].bondOrder.push(order);\n   }\n\n   protein.smallMolecule = true;\n   return true;\n}\n\nparseXYZ(str) {\n   var atoms = this.atoms;\n   var protein = this.protein;\n\n   var lines = str.split(\"\\n\");\n   if (lines.length < 3) return;\n   var atomCount = parseInt(lines[0].substr(0, 3));\n   if (isNaN(atomCount) || atomCount <= 0) return;\n   if (lines.length < atomCount + 2) return;\n   var offset = 2;\n   for (var i = 1; i <= atomCount; i++) {\n      var line = lines[offset++];\n      var tokens = line.replace(/^\\s+/, \"\").replace(/\\s+/g,\" \").split(\" \");\n      console.log(tokens);\n      var atom = {};\n      \n      atom.serial = i;\n      atom.atom = atom.elem = tokens[0];\n      atom.x = parseFloat(tokens[1]);\n      atom.y = parseFloat(tokens[2]);\n      atom.z = parseFloat(tokens[3]);\n      atom.hetflag = true;\n      atom.bonds = [];\n      atom.bondOrder = [];\n      atoms[i] = atom;\n   }\n   for (var i = 1; i < atomCount; i++) // hopefully XYZ is small enough\n      for (var j = i + 1; j <= atomCount; j++)\n         if (this.isConnected(atoms[i], atoms[j])) {\n\t    atoms[i].bonds.push(j);\n\t    atoms[i].bondOrder.push(1);\n    \t    atoms[j].bonds.push(i);\n     \t    atoms[j].bondOrder.push(1);\n         }\n   protein.smallMolecule = true;\n   return true;\n}\n\nparsePDB2(str) {\n   var atoms = this.atoms;\n   var protein = this.protein;\n   var molID;\n\n   var atoms_cnt = 0;\n   var lines = str.split(\"\\n\");\n   for (var i = 0; i < lines.length; i++) {\n      var line = lines[i].replace(/^\\s*/, ''); // remove indent\n      var recordName = line.substr(0, 6);\n      if (recordName == 'ATOM  ' || recordName == 'HETATM') {\n         var atom, resn, chain, resi, x, y, z, hetflag, elem, serial, altLoc, b;\n         altLoc = line.substr(16, 1);\n         if (altLoc != ' ' && altLoc != 'A') continue; // FIXME: ad hoc\n\n         var serial = line.substr(6, 5);\n         if ( /^[ 0-9]+$/.test(serial) ){\n        \t serial = parseInt(serial); \n         } else {\n        \t serial = parseInt(serial,16);\n         }\n         \n         \n         \n         atom = line.substr(12, 4).replace(/ /g, \"\");\n         resn = line.substr(17, 3);\n         chain = line.substr(21, 1);\n         resi = parseInt(line.substr(22, 5)); \n         x = parseFloat(line.substr(30, 8));\n         y = parseFloat(line.substr(38, 8));\n         z = parseFloat(line.substr(46, 8));\n         b = parseFloat(line.substr(60, 8));\n         elem = line.substr(76, 2).replace(/ /g, \"\");\n         if (elem == '') { // for some incorrect PDB files\n            elem = line.substr(12, 4).replace(/ /g,\"\");\n         }\n         if (line[0] == 'H') hetflag = true;\n         else hetflag = false;\n         atoms[serial] = {'resn': resn, 'x': x, 'y': y, 'z': z, 'elem': elem,\n  'hetflag': hetflag, 'chain': chain, 'resi': resi, 'serial': serial, 'atom': atom,\n  'bonds': [], 'ss': 'c', 'color': 0xFFFFFF, 'bonds': [], 'bondOrder': [], 'b': b /*\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t * ',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t * altLoc':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t * altLoc\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t */};\n      } else if (recordName == 'SHEET ') {\n         var startChain = line.substr(21, 1);\n         var startResi = parseInt(line.substr(22, 4));\n         var endChain = line.substr(32, 1);\n         var endResi = parseInt(line.substr(33, 4));\n         protein.sheet.push([startChain, startResi, endChain, endResi]);\n     } else if (recordName == 'CONECT') {\n// MEMO: We don't have to parse SSBOND, LINK because both are also\n// described in CONECT. But what about 2JYT???\n         var from = parseInt(line.substr(6, 5));\n         for (var j = 0; j < 4; j++) {\n            var to = parseInt(line.substr([11, 16, 21, 26][j], 5));\n            if (isNaN(to)) continue;\n            if (atoms[from] != undefined) {\n               atoms[from].bonds.push(to);\n               atoms[from].bondOrder.push(1);\n            }\n         }\n     } else if (recordName == 'HELIX ') {\n         var startChain = line.substr(19, 1);\n         var startResi = parseInt(line.substr(21, 4));\n         var endChain = line.substr(31, 1);\n         var endResi = parseInt(line.substr(33, 4));\n         protein.helix.push([startChain, startResi, endChain, endResi]);\n     } else if (recordName == 'CRYST1') {\n         protein.a = parseFloat(line.substr(6, 9));\n         protein.b = parseFloat(line.substr(15, 9));\n         protein.c = parseFloat(line.substr(24, 9));\n         protein.alpha = parseFloat(line.substr(33, 7));\n         protein.beta = parseFloat(line.substr(40, 7));\n         protein.gamma = parseFloat(line.substr(47, 7));\n         protein.spacegroup = line.substr(55, 11);\n         this.defineCell();\n      } else if (recordName == 'REMARK') {\n         var type = parseInt(line.substr(7, 3));\n         if (type == 290 && line.substr(13, 5) == 'SMTRY') {\n            var n = parseInt(line[18]) - 1;\n            var m = parseInt(line.substr(21, 2));\n            if (protein.symMat[m] == undefined) protein.symMat[m] = new THREE.Matrix4().identity();\n            protein.symMat[m].elements[n] = parseFloat(line.substr(24, 9));\n            protein.symMat[m].elements[n + 4] = parseFloat(line.substr(34, 9));\n            protein.symMat[m].elements[n + 8] = parseFloat(line.substr(44, 9));\n            protein.symMat[m].elements[n + 12] = parseFloat(line.substr(54, 10));\n         } else if (type == 350 && line.substr(13, 5) == 'BIOMT') {\n            var n = parseInt(line[18]) - 1;\n            var m = parseInt(line.substr(21, 2));\n            if (protein.biomtMatrices[m] == undefined) protein.biomtMatrices[m] = new THREE.Matrix4().identity();\n            protein.biomtMatrices[m].elements[n] = parseFloat(line.substr(24, 9));\n            protein.biomtMatrices[m].elements[n + 4] = parseFloat(line.substr(34, 9));\n            protein.biomtMatrices[m].elements[n + 8] = parseFloat(line.substr(44, 9));\n            protein.biomtMatrices[m].elements[n + 12] = parseFloat(line.substr(54, 10));\n         } else if (type == 350 && line.substr(11, 11) == 'BIOMOLECULE') {\n             protein.biomtMatrices = []; protein.biomtChains = '';\n         } else if (type == 350 && line.substr(34, 6) == 'CHAINS') {\n             protein.biomtChains += line.substr(41, 40);\n         }\n      } else if (recordName == 'HEADER') {\n         protein.pdbID = line.substr(62, 4);\n      } else if (recordName == 'TITLE ') {\n         if (protein.title == undefined) protein.title = \"\";\n            protein.title += line.substr(10, 70) + \"\\n\"; // CHECK: why 60 is\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// not enough???\n      } else if (recordName == 'COMPND') {\n              // TODO: Implement me!\n      }\n   }\n\n   // Assign secondary structures\n   for (i = 0; i < atoms.length; i++) {\n      atom = atoms[i]; if (atom == undefined) continue;\n\n      var found = false;\n      // MEMO: Can start chain and end chain differ?\n      for (j = 0; j < protein.sheet.length; j++) {\n         if (atom.chain != protein.sheet[j][0]) continue;\n         if (atom.resi < protein.sheet[j][1]) continue;\n         if (atom.resi > protein.sheet[j][3]) continue;\n         atom.ss = 's';\n         if (atom.resi == protein.sheet[j][1]) atom.ssbegin = true;\n         if (atom.resi == protein.sheet[j][3]) atom.ssend = true;\n      }\n      for (j = 0; j < protein.helix.length; j++) {\n         if (atom.chain != protein.helix[j][0]) continue;\n         if (atom.resi < protein.helix[j][1]) continue;\n         if (atom.resi > protein.helix[j][3]) continue;\n         atom.ss = 'h';\n         if (atom.resi == protein.helix[j][1]) atom.ssbegin = true;\n         else if (atom.resi == protein.helix[j][3]) atom.ssend = true;\n      }\n   }\n   protein.smallMolecule = false;\n   return true;\n}\n\n// Catmull-Rom subdivision\nsubdivide(_points, DIV) { // points as Vector3\n   var ret = [];\n   var points = _points;\n   points = new Array(); // Smoothing test\n   points.push(_points[0]);\n   for (var i = 1, lim = _points.length - 1; i < lim; i++) {\n      var p1 = _points[i], p2 = _points[i + 1];\n      if (p1.smoothen) points.push(new TV3((p1.x + p2.x) / 2, (p1.y + p2.y) / 2, (p1.z + p2.z) / 2));\n      else points.push(p1);\n   }\n   points.push(_points[_points.length - 1]);\n\n   for (var i = -1, size = points.length; i <= size - 3; i++) {\n      var p0 = points[(i == -1) ? 0 : i];\n      var p1 = points[i + 1], p2 = points[i + 2];\n      var p3 = points[(i == size - 3) ? size - 1 : i + 3];\n      var v0 = new TV3().sub(p2, p0).multiplyScalar(0.5);\n      var v1 = new TV3().sub(p3, p1).multiplyScalar(0.5);\n      for (var j = 0; j < DIV; j++) {\n         var t = 1.0 / DIV * j;\n         var x = p1.x + t * v0.x \n                  + t * t * (-3 * p1.x + 3 * p2.x - 2 * v0.x - v1.x)\n                  + t * t * t * (2 * p1.x - 2 * p2.x + v0.x + v1.x);\n         var y = p1.y + t * v0.y \n                  + t * t * (-3 * p1.y + 3 * p2.y - 2 * v0.y - v1.y)\n                  + t * t * t * (2 * p1.y - 2 * p2.y + v0.y + v1.y);\n         var z = p1.z + t * v0.z \n                  + t * t * (-3 * p1.z + 3 * p2.z - 2 * v0.z - v1.z)\n                  + t * t * t * (2 * p1.z - 2 * p2.z + v0.z + v1.z);\n         ret.push(new TV3(x, y, z));\n      }\n   }\n   ret.push(points[points.length - 1]);\n   return ret;\n}\n\ndrawAtomsAsSphere(group, atomlist, defaultRadius, forceDefault, scale) {\n   var sphereGeometry = new THREE.SphereGeometry(1, this.sphereQuality, this.sphereQuality); // r,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// seg,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// ring\n   for (var i = 0; i < atomlist.length; i++) {\n      var atom = this.atoms[atomlist[i]];\n      if (atom == undefined) continue;\n\n      var sphereMaterial = new THREE.MeshLambertMaterial({color: atom.color});\n      var sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);\n      group.add(sphere);\n      var r = (!forceDefault && this.vdwRadii[atom.elem] != undefined) ? this.vdwRadii[atom.elem] : defaultRadius;\n      if (!forceDefault && scale) r *= scale;\n      sphere.scale.x = sphere.scale.y = sphere.scale.z = r;\n      sphere.position.x = atom.x;\n      sphere.position.y = atom.y;\n      sphere.position.z = atom.z;\n   }\n}\n\n// about two times faster than sphere when div = 2\ndrawAtomsAsIcosahedron(group, atomlist, defaultRadius, forceDefault) {\n   var geo = this.IcosahedronGeometry();\n   for (var i = 0; i < atomlist.length; i++) {\n      var atom = this.atoms[atomlist[i]];\n      if (atom == undefined) continue;\n\n      var mat = new THREE.MeshLambertMaterial({color: atom.color});\n      var sphere = new THREE.Mesh(geo, mat);\n      sphere.scale.x = sphere.scale.y = sphere.scale.z = (!forceDefault && this.vdwRadii[atom.elem] != undefined) ? this.vdwRadii[atom.elem] : defaultRadius;\n      group.add(sphere);\n      sphere.position.x = atom.x;\n      sphere.position.y = atom.y;\n      sphere.position.z = atom.z;\n   }\n}\n\nisConnected(atom1, atom2) {\n   var s = atom1.bonds.indexOf(atom2.serial);\n   if (s != -1) return atom1.bondOrder[s];\n\n   if (this.protein.smallMolecule && (atom1.hetflag || atom2.hetflag)) return 0; // CHECK:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// or\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// should\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// I ?\n\n   var distSquared = (atom1.x - atom2.x) * (atom1.x - atom2.x) + \n                     (atom1.y - atom2.y) * (atom1.y - atom2.y) + \n                     (atom1.z - atom2.z) * (atom1.z - atom2.z);\n\n// if (atom1.altLoc != atom2.altLoc) return false;\n   if (isNaN(distSquared)) return 0;\n   if (distSquared < 0.5) return 0; // maybe duplicate position.\n\n   if (distSquared > 1.3 && (atom1.elem == 'H' || atom2.elem == 'H' || atom1.elem == 'D' || atom2.elem == 'D')) return 0;\n   if (distSquared < 3.42 && (atom1.elem == 'S' || atom2.elem == 'S')) return 1;\n   if (distSquared > 2.78) return 0;\n   return 1;\n}\n\ndrawBondAsStickSub(group, atom1, atom2, bondR, order) {\n   var delta, tmp;\n   if (order > 1) delta = this.calcBondDelta(atom1, atom2, bondR * 2.3);\n   var p1 = new TV3(atom1.x, atom1.y, atom1.z);\n   var p2 = new TV3(atom2.x, atom2.y, atom2.z);\n   var mp = p1.clone().addSelf(p2).multiplyScalar(0.5);\n\n   var c1 = new TCo(atom1.color), c2 = new TCo(atom2.color);\n   if (order == 1 || order == 3) {\n      this.drawCylinder(group, p1, mp, bondR, atom1.color);\n      this.drawCylinder(group, p2, mp, bondR, atom2.color);\n   }\n   if (order > 1) {\n      tmp = mp.clone().addSelf(delta);\n      this.drawCylinder(group, p1.clone().addSelf(delta), tmp, bondR, atom1.color);\n      this.drawCylinder(group, p2.clone().addSelf(delta), tmp, bondR, atom2.color);\n      tmp = mp.clone().subSelf(delta);\n      this.drawCylinder(group, p1.clone().subSelf(delta), tmp, bondR, atom1.color);\n      this.drawCylinder(group, p2.clone().subSelf(delta), tmp, bondR, atom2.color);\n   }\n}\n\ndrawBondsAsStick(group, atomlist, bondR, atomR, ignoreNonbonded, multipleBonds, scale) {\n   var sphereGeometry = new THREE.SphereGeometry(1, this.sphereQuality, this.sphereQuality);\n   var nAtoms = atomlist.length, mp;\n   var forSpheres = [];\n   if (!!multipleBonds) bondR /= 2.5;\n   for (var _i = 0; _i < nAtoms; _i++) {\n      var i = atomlist[_i];\n      var atom1 = this.atoms[i];\n      if (atom1 == undefined) continue;\n      for (var _j = _i + 1; _j < _i + 30 && _j < nAtoms; _j++) {\n         var j = atomlist[_j];\n         var atom2 = this.atoms[j];\n         if (atom2 == undefined) continue;\n         var order = this.isConnected(atom1, atom2);\n         if (order == 0) continue;\n         atom1.connected = atom2.connected = true;\n         this.drawBondAsStickSub(group, atom1, atom2, bondR, (!!multipleBonds) ? order : 1);\n      }\n      for (var _j = 0; _j < atom1.bonds.length; _j++) {\n         var j = atom1.bonds[_j];\n         if (j < i + 30) continue; // be conservative!\n         if (atomlist.indexOf(j) == -1) continue;\n         var atom2 = this.atoms[j];\n         if (atom2 == undefined) continue;\n         atom1.connected = atom2.connected = true;\n         this.drawBondAsStickSub(group, atom1, atom2, bondR, (!!multipleBonds) ? atom1.bondOrder[_j] : 1);\n      }\n      if (atom1.connected) forSpheres.push(i);\n   }\n   this.drawAtomsAsSphere(group, forSpheres, atomR, !scale, scale);\n}\n\ndefineCell() {\n    var p = this.protein;\n    if (p.a == undefined) return;\n\n    p.ax = p.a;\n    p.ay = 0;\n    p.az = 0;\n    p.bx = p.b * Math.cos(Math.PI / 180.0 * p.gamma);\n    p.by = p.b * Math.sin(Math.PI / 180.0 * p.gamma);\n    p.bz = 0;\n    p.cx = p.c * Math.cos(Math.PI / 180.0 * p.beta);\n    p.cy = p.c * (Math.cos(Math.PI / 180.0 * p.alpha) - \n               Math.cos(Math.PI / 180.0 * p.gamma) \n             * Math.cos(Math.PI / 180.0 * p.beta)\n             / Math.sin(Math.PI / 180.0 * p.gamma));\n    p.cz = Math.sqrt(p.c * p.c * Math.sin(Math.PI / 180.0 * p.beta)\n               * Math.sin(Math.PI / 180.0 * p.beta) - p.cy * p.cy);\n}\n\ndrawUnitcell(group) {\n    var p = this.protein;\n    if (p.a == undefined) return;\n\n    var vertices = [[0, 0, 0], [p.ax, p.ay, p.az], [p.bx, p.by, p.bz], [p.ax + p.bx, p.ay + p.by, p.az + p.bz],\n          [p.cx, p.cy, p.cz], [p.cx + p.ax, p.cy + p.ay,  p.cz + p.az], [p.cx + p.bx, p.cy + p.by, p.cz + p.bz], [p.cx + p.ax + p.bx, p.cy + p.ay + p.by, p.cz + p.az + p.bz]];\n    var edges = [0, 1, 0, 2, 1, 3, 2, 3, 4, 5, 4, 6, 5, 7, 6, 7, 0, 4, 1, 5, 2, 6, 3, 7];    \n\n    var geo = new THREE.Geometry();\n    for (var i = 0; i < edges.length; i++) {\n       geo.vertices.push(new TV3(vertices[edges[i]][0], vertices[edges[i]][1], vertices[edges[i]][2]));\n    }\n   var lineMaterial = new THREE.LineBasicMaterial({linewidth: 1, color: 0xcccccc});\n   var line = new THREE.Line(geo, lineMaterial);\n   line.type = THREE.LinePieces;\n   group.add(line);\n}\n\n// TODO: Find inner side of a ring\ncalcBondDelta(atom1, atom2, sep) {\n   var dot;\n   var axis = new TV3(atom1.x - atom2.x, atom1.y - atom2.y, atom1.z - atom2.z).normalize();\n   var found = null;\n   for (var i = 0; i < atom1.bonds.length && !found; i++) {\n      var atom = this.atoms[atom1.bonds[i]]; if (!atom) continue;\n      if (atom.serial != atom2.serial && atom.elem != 'H') found = atom;\n   }\n   for (var i = 0; i < atom2.bonds.length && !found; i++) {\n      var atom = this.atoms[atom2.bonds[i]]; if (!atom) continue;\n      if (atom.serial != atom1.serial && atom.elem != 'H') found = atom;\n   }\n   if (found) {\n      var tmp = new TV3(atom1.x - found.x, atom1.y - found.y, atom1.z - found.z).normalize();\n      dot = tmp.dot(axis);\n      delta = new TV3(tmp.x - axis.x * dot, tmp.y - axis.y * dot, tmp.z - axis.z * dot);\n   }\n   if (!found || Math.abs(dot - 1) < 0.001 || Math.abs(dot + 1) < 0.001) {\n      if (axis.x < 0.01 && axis.y < 0.01) {\n         delta = new TV3(0, -axis.z, axis.y);\n      } else {\n         delta = new TV3(-axis.y, axis.x, 0);\n      }\n   }\n   delta.normalize().multiplyScalar(sep);\n   return delta;\n}\n\ndrawBondsAsLineSub(geo, atom1, atom2, order) {\n   var delta, tmp, vs = geo.vertices, cs = geo.colors;\n   if (order > 1) delta = this.calcBondDelta(atom1, atom2, 0.15);\n   var p1 = new TV3(atom1.x, atom1.y, atom1.z);\n   var p2 = new TV3(atom2.x, atom2.y, atom2.z);\n   var mp = p1.clone().addSelf(p2).multiplyScalar(0.5);\n\n   var c1 = new TCo(atom1.color), c2 = new TCo(atom2.color);\n   if (order == 1 || order == 3) {\n      vs.push(p1); cs.push(c1); vs.push(mp); cs.push(c1);\n      vs.push(p2); cs.push(c2); vs.push(mp); cs.push(c2);\n   }\n   if (order > 1) {\n      vs.push(p1.clone().addSelf(delta)); cs.push(c1);\n      vs.push(tmp = mp.clone().addSelf(delta)); cs.push(c1);\n      vs.push(p2.clone().addSelf(delta)); cs.push(c2);\n      vs.push(tmp); cs.push(c2);\n      vs.push(p1.clone().subSelf(delta)); cs.push(c1);\n      vs.push(tmp = mp.clone().subSelf(delta)); cs.push(c1);\n      vs.push(p2.clone().subSelf(delta)); cs.push(c2);\n      vs.push(tmp); cs.push(c2);\n   }\n}\n\ndrawBondsAsLine(group, atomlist, lineWidth) {\n   var geo = new THREE.Geometry();   \n   var nAtoms = atomlist.length;\n\n   for (var _i = 0; _i < nAtoms; _i++) {\n      var i = atomlist[_i];\n      var  atom1 = this.atoms[i];\n      if (atom1 == undefined) continue;\n      for (var _j = _i + 1; _j < _i + 30 && _j < nAtoms; _j++) {\n         var j = atomlist[_j];\n         var atom2 = this.atoms[j];\n         if (atom2 == undefined) continue;\n         var order = this.isConnected(atom1, atom2);\n         if (order == 0) continue;\n\n         this.drawBondsAsLineSub(geo, atom1, atom2, order);\n      }\n      for (var _j = 0; _j < atom1.bonds.length; _j++) {\n          var j = atom1.bonds[_j];\n          if (j < i + 30) continue; // be conservative!\n          if (atomlist.indexOf(j) == -1) continue;\n          var atom2 = this.atoms[j];\n          if (atom2 == undefined) continue;\n          this.drawBondsAsLineSub(geo, atom1, atom2, atom1.bondOrder[_j]);\n      }\n    }\n   var lineMaterial = new THREE.LineBasicMaterial({linewidth: lineWidth});\n   lineMaterial.vertexColors = true;\n\n   var line = new THREE.Line(geo, lineMaterial);\n   line.type = THREE.LinePieces;\n   group.add(line);\n}\n\ndrawSmoothCurve(group, _points, width, colors, div) {\n   if (_points.length == 0) return;\n\n   div = (div == undefined) ? 5 : div;\n\n   var geo = new THREE.Geometry();\n   var points = this.subdivide(_points, div);\n\n   for (var i = 0; i < points.length; i++) {\n      geo.vertices.push(points[i]);\n      geo.colors.push(new TCo(colors[(i == 0) ? 0 : Math.round((i - 1) / div)]));\n  }\n  var lineMaterial = new THREE.LineBasicMaterial({linewidth: width});\n  lineMaterial.vertexColors = true;\n  var line = new THREE.Line(geo, lineMaterial);\n  line.type = THREE.LineStrip;\n  group.add(line);\n}\n\ndrawAsCross(group, atomlist, delta) {\n   var geo = new THREE.Geometry();\n   var points = [[delta, 0, 0], [-delta, 0, 0], [0, delta, 0], [0, -delta, 0], [0, 0, delta], [0, 0, -delta]];\n \n   for (var i = 0, lim = atomlist.length; i < lim; i++) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      var c = new TCo(atom.color);\n      for (var j = 0; j < 6; j++) {\n         geo.vertices.push(new TV3(atom.x + points[j][0], atom.y + points[j][1], atom.z + points[j][2]));\n         geo.colors.push(c);\n      }\n  }\n  var lineMaterial = new THREE.LineBasicMaterial({linewidth: this.lineWidth});\n  lineMaterial.vertexColors = true;\n  var line = new THREE.Line(geo, lineMaterial, THREE.LinePieces);\n  group.add(line);\n}\n\n// FIXME: Winkled...\ndrawSmoothTube(group, _points, colors, radii) {\n   if (_points.length < 2) return;\n\n   var circleDiv = this.tubeDIV, axisDiv = this.axisDIV;\n   var geo = new THREE.Geometry();\n   var points = this.subdivide(_points, axisDiv);\n   var prevAxis1 = new TV3(), prevAxis2;\n\n   for (var i = 0, lim = points.length; i < lim; i++) {\n      var r, idx = (i - 1) / axisDiv;\n      if (i == 0) r = radii[0];\n      else { \n         if (idx % 1 == 0) r = radii[idx];\n         else {\n            var floored = Math.floor(idx);\n            var tmp = idx - floored;\n            r = radii[floored] * tmp + radii[floored + 1] * (1 - tmp);\n         }\n      }\n      var delta, axis1, axis2;\n\n      if (i < lim - 1) {\n         delta = new TV3().sub(points[i], points[i + 1]);\n         axis1 = new TV3(0, - delta.z, delta.y).normalize().multiplyScalar(r);\n         axis2 = new TV3().cross(delta, axis1).normalize().multiplyScalar(r);\n// var dir = 1, offset = 0;\n         if (prevAxis1.dot(axis1) < 0) {\n                 axis1.negate(); axis2.negate();  // dir = -1;//offset = 2 *\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Math.PI / axisDiv;\n         }\n         prevAxis1 = axis1; prevAxis2 = axis2;\n      } else {\n         axis1 = prevAxis1; axis2 = prevAxis2;\n      }\n\n      for (var j = 0; j < circleDiv; j++) {\n         var angle = 2 * Math.PI / circleDiv * j; // * dir + offset;\n         var c = Math.cos(angle), s = Math.sin(angle);\n         geo.vertices.push(new TV3(\n         points[i].x + c * axis1.x + s * axis2.x,\n         points[i].y + c * axis1.y + s * axis2.y, \n         points[i].z + c * axis1.z + s * axis2.z));\n      }\n   }\n\n   var offset = 0;\n   for (var i = 0, lim = points.length - 1; i < lim; i++) {\n      var c =  new TCo(colors[Math.round((i - 1)/ axisDiv)]);\n\n      var reg = 0;\n      var r1 = new TV3().sub(geo.vertices[offset], geo.vertices[offset + circleDiv]).lengthSq();\n      var r2 = new TV3().sub(geo.vertices[offset], geo.vertices[offset + circleDiv + 1]).lengthSq();\n      if (r1 > r2) {r1 = r2; reg = 1;};\n      for (var j = 0; j < circleDiv; j++) {\n          geo.faces.push(new TF3(offset + j, offset + (j + reg) % circleDiv + circleDiv, offset + (j + 1) % circleDiv));\n          geo.faces.push(new TF3(offset + (j + 1) % circleDiv, offset + (j + reg) % circleDiv + circleDiv, offset + (j + reg + 1) % circleDiv + circleDiv));\n          geo.faces[geo.faces.length -2].color = c;\n          geo.faces[geo.faces.length -1].color = c;\n      }\n      offset += circleDiv;\n   }\n   geo.computeFaceNormals();\n   geo.computeVertexNormals(false);\n   var mat = new THREE.MeshLambertMaterial();\n   mat.vertexColors = THREE.FaceColors;\n   var mesh = new THREE.Mesh(geo, mat);\n   mesh.doubleSided = true;\n   group.add(mesh);\n}\n\n\ndrawMainchainCurve(group, atomlist, curveWidth, atomName, div) {\n   var points = [], colors = [];\n   var currentChain, currentResi;\n   if (div == undefined) div = 5;\n\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]];\n      if (atom == undefined) continue;\n\n      if ((atom.atom == atomName) && !atom.hetflag) {\n         if (currentChain != atom.chain || currentResi + 1 != atom.resi) {\n            this.drawSmoothCurve(group, points, curveWidth, colors, div);\n            points = [];\n            colors = [];\n         }\n         points.push(new TV3(atom.x, atom.y, atom.z));\n         colors.push(atom.color);\n         currentChain = atom.chain;\n         currentResi = atom.resi;\n      }\n   }\n    this.drawSmoothCurve(group, points, curveWidth, colors, div);\n}\n\ndrawMainchainTube(group, atomlist, atomName, radius) {\n   var points = [], colors = [], radii = [];\n   var currentChain, currentResi;\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]];\n      if (atom == undefined) continue;\n\n      if ((atom.atom == atomName) && !atom.hetflag) {\n         if (currentChain != atom.chain || currentResi + 1 != atom.resi) {\n            this.drawSmoothTube(group, points, colors, radii);\n            points = []; colors = []; radii = [];\n         }\n         points.push(new TV3(atom.x, atom.y, atom.z));\n         if (radius == undefined) {\n            radii.push((atom.b > 0) ? atom.b / 100 : 0.3);\n         } else {\n            radii.push(radius);\n         }\n         colors.push(atom.color);\n         currentChain = atom.chain;\n         currentResi = atom.resi;\n      }\n   }\n   this.drawSmoothTube(group, points, colors, radii);\n}\n\ndrawStrip(group, p1, p2, colors, div, thickness) {\n   if ((p1.length) < 2) return;\n   div = div || this.axisDIV;\n   p1 = this.subdivide(p1, div);\n   p2 = this.subdivide(p2, div);\n   if (!thickness) return this.drawThinStrip(group, p1, p2, colors, div);\n\n   var geo = new THREE.Geometry();\n   var vs = geo.vertices, fs = geo.faces;\n   var axis, p1v, p2v, a1v, a2v;\n   for (var i = 0, lim = p1.length; i < lim; i++) {\n      vs.push(p1v = p1[i]); // 0\n      vs.push(p1v); // 1\n      vs.push(p2v = p2[i]); // 2\n      vs.push(p2v); // 3\n      if (i < lim - 1) {\n         var toNext = p1[i + 1].clone().subSelf(p1[i]);\n         var toSide = p2[i].clone().subSelf(p1[i]);\n         axis = toSide.crossSelf(toNext).normalize().multiplyScalar(thickness);\n      }\n      vs.push(a1v = p1[i].clone().addSelf(axis)); // 4\n      vs.push(a1v); // 5\n      vs.push(a2v = p2[i].clone().addSelf(axis)); // 6\n      vs.push(a2v); // 7\n   }\n   var faces = [[0, 2, -6, -8], [-4, -2, 6, 4], [7, 3, -5, -1], [-3, -7, 1, 5]];\n   for (var i = 1, lim = p1.length; i < lim; i++) {\n      var offset = 8 * i, color = new TCo(colors[Math.round((i - 1)/ div)]);\n      for (var j = 0; j < 4; j++) {\n         var f = new THREE.Face4(offset + faces[j][0], offset + faces[j][1], offset + faces[j][2], offset + faces[j][3], undefined, color);\n         fs.push(f);\n      }\n   }\n   var vsize = vs.length - 8; // Cap\n   for (var i = 0; i < 4; i++) {vs.push(vs[i * 2]); vs.push(vs[vsize + i * 2])};\n   vsize += 8;\n   fs.push(new THREE.Face4(vsize, vsize + 2, vsize + 6, vsize + 4, undefined, fs[0].color));\n   fs.push(new THREE.Face4(vsize + 1, vsize + 5, vsize + 7, vsize + 3, undefined, fs[fs.length - 3].color));\n   geo.computeFaceNormals();\n   geo.computeVertexNormals(false);\n   var material =  new THREE.MeshLambertMaterial();\n   material.vertexColors = THREE.FaceColors;\n   var mesh = new THREE.Mesh(geo, material);\n   mesh.doubleSided = true;\n   group.add(mesh);\n}\n\n\ndrawThinStrip(group, p1, p2, colors, div) {\n   var geo = new THREE.Geometry();\n   for (var i = 0, lim = p1.length; i < lim; i++) {\n      geo.vertices.push(p1[i]); // 2i\n      geo.vertices.push(p2[i]); // 2i + 1\n   }\n   for (var i = 1, lim = p1.length; i < lim; i++) {\n      var f = new THREE.Face4(2 * i, 2 * i + 1, 2 * i - 1, 2 * i - 2);\n      f.color = new TCo(colors[Math.round((i - 1)/ div)]);\n      geo.faces.push(f);\n   }\n   geo.computeFaceNormals();\n   geo.computeVertexNormals(false);\n   var material =  new THREE.MeshLambertMaterial();\n   material.vertexColors = THREE.FaceColors;\n   var mesh = new THREE.Mesh(geo, material);\n   mesh.doubleSided = true;\n   group.add(mesh);\n}\n\n\nIcosahedronGeometry() {\n   if (!this.icosahedron) this.icosahedron = new THREE.IcosahedronGeometry(1);\n   return this.icosahedron;\n}\n\ndrawCylinder(group, from, to, radius, color, cap) {\n   if (!from || !to) return;\n\n   var midpoint = new TV3().add(from, to).multiplyScalar(0.5);\n   var color = new TCo(color);\n\n   if (!this.cylinderGeometry) {\n      this.cylinderGeometry = new THREE.CylinderGeometry(1, 1, 1, this.cylinderQuality, 1, !cap);\n      this.cylinderGeometry.faceUvs = [];\n      this.faceVertexUvs = [];\n   }\n   var cylinderMaterial = new THREE.MeshLambertMaterial({color: color.getHex()});\n   var cylinder = new THREE.Mesh(this.cylinderGeometry, cylinderMaterial);\n   cylinder.position = midpoint;\n   cylinder.lookAt(from);\n   cylinder.updateMatrix();\n   cylinder.matrixAutoUpdate = false;\n   var m = new THREE.Matrix4().makeScale(radius, radius, from.distanceTo(to));\n   m.rotateX(Math.PI / 2);\n   cylinder.matrix.multiplySelf(m);\n   group.add(cylinder);\n}\n\n// FIXME: transition!\ndrawHelixAsCylinder(group, atomlist, radius) {\n   var start = null;\n   var currentChain, currentResi;\n\n   var others = [], beta = [];\n\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]];\n      if (atom == undefined || atom.hetflag) continue;\n      if ((atom.ss != 'h' && atom.ss != 's') || atom.ssend || atom.ssbegin) others.push(atom.serial);\n      if (atom.ss == 's') beta.push(atom.serial);\n      if (atom.atom != 'CA') continue;\n\n      if (atom.ss == 'h' && atom.ssend) {\n         if (start != null) this.drawCylinder(group, new TV3(start.x, start.y, start.z), new TV3(atom.x, atom.y, atom.z), radius, atom.color, true);\n         start = null;\n      }\n      currentChain = atom.chain;\n      currentResi = atom.resi;\n      if (start == null && atom.ss == 'h' && atom.ssbegin) start = atom;\n   }\n   if (start != null) this.drawCylinder(group, new TV3(start.x, start.y, start.z), new TV3(atom.x, atom.y, atom.z), radius, atom.color);\n   this.drawMainchainTube(group, others, \"CA\", 0.3);\n   this.drawStrand(group, beta, undefined, undefined, true,  0, this.helixSheetWidth, false, this.thickness * 2);\n}\n\ndrawCartoon(group, atomlist, doNotSmoothen, thickness) {\n   this.drawStrand(group, atomlist, 2, undefined, true, undefined, undefined, doNotSmoothen, thickness);\n}\n\ndrawStrand(group, atomlist, num, div, fill, coilWidth, helixSheetWidth, doNotSmoothen, thickness) {\n   num = num || this.strandDIV;\n   div = div || this.axisDIV;\n   coilWidth = coilWidth || this.coilWidth;\n   doNotSmoothen == (doNotSmoothen == undefined) ? false : doNotSmoothen;\n   helixSheetWidth = helixSheetWidth || this.helixSheetWidth;\n   var points = []; for (var k = 0; k < num; k++) points[k] = [];\n   var colors = [];\n   var currentChain, currentResi, currentCA;\n   var prevCO = null, ss=null, ssborder = false;\n\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]];\n      if (atom == undefined) continue;\n\n      if ((atom.atom == 'O' || atom.atom == 'CA') && !atom.hetflag) {\n         if (atom.atom == 'CA') {\n            if (currentChain != atom.chain || currentResi + 1 != atom.resi) {\n               for (var j = 0; !thickness && j < num; j++)\n                  this.drawSmoothCurve(group, points[j], 1 ,colors, div);\n               if (fill) this.drawStrip(group, points[0], points[num - 1], colors, div, thickness);\n               var points = []; for (var k = 0; k < num; k++) points[k] = [];\n               colors = [];\n               prevCO = null; ss = null; ssborder = false;\n            }\n            currentCA = new TV3(atom.x, atom.y, atom.z);\n            currentChain = atom.chain;\n            currentResi = atom.resi;\n            ss = atom.ss; ssborder = atom.ssstart || atom.ssend;\n            colors.push(atom.color);\n         } else { // O\n            var O = new TV3(atom.x, atom.y, atom.z);\n            O.subSelf(currentCA);\n            O.normalize(); // can be omitted for performance\n            O.multiplyScalar((ss == 'c') ? coilWidth : helixSheetWidth); \n            if (prevCO != undefined && O.dot(prevCO) < 0) O.negate();\n            prevCO = O;\n            for (var j = 0; j < num; j++) {\n               var delta = -1 + 2 / (num - 1) * j;\n               var v = new TV3(currentCA.x + prevCO.x * delta, \n                               currentCA.y + prevCO.y * delta, currentCA.z + prevCO.z * delta);\n               if (!doNotSmoothen && ss == 's') v.smoothen = true;\n               points[j].push(v);\n            }                         \n         }\n      }\n   }\n   for (var j = 0; !thickness && j < num; j++)\n      this.drawSmoothCurve(group, points[j], 1 ,colors, div);\n   if (fill) this.drawStrip(group, points[0], points[num - 1], colors, div, thickness);\n}\n\ndrawNucleicAcidLadderSub(geo, lineGeo, atoms, color) {\n// color.r *= 0.9; color.g *= 0.9; color.b *= 0.9;\n   if (atoms[0] != undefined && atoms[1] != undefined && atoms[2] != undefined &&\n       atoms[3] != undefined && atoms[4] != undefined && atoms[5] != undefined) {\n      var baseFaceId = geo.vertices.length;\n      for (var i = 0; i <= 5; i++) geo.vertices.push(atoms[i]);\n          geo.faces.push(new TF3(baseFaceId, baseFaceId + 1, baseFaceId + 2));\n          geo.faces.push(new TF3(baseFaceId, baseFaceId + 2, baseFaceId + 3));\n          geo.faces.push(new TF3(baseFaceId, baseFaceId + 3, baseFaceId + 4));\n          geo.faces.push(new TF3(baseFaceId, baseFaceId + 4, baseFaceId + 5));\n          for (var j = geo.faces.length - 4, lim = geo.faces.length; j < lim; j++) geo.faces[j].color = color;\n    }\n    if (atoms[4] != undefined && atoms[3] != undefined && atoms[6] != undefined &&\n       atoms[7] != undefined && atoms[8] != undefined) {\n       var baseFaceId = geo.vertices.length;\n       geo.vertices.push(atoms[4]);\n       geo.vertices.push(atoms[3]);\n       geo.vertices.push(atoms[6]);\n       geo.vertices.push(atoms[7]);\n       geo.vertices.push(atoms[8]);\n       for (var i = 0; i <= 4; i++) geo.colors.push(color);\n       geo.faces.push(new TF3(baseFaceId, baseFaceId + 1, baseFaceId + 2));\n       geo.faces.push(new TF3(baseFaceId, baseFaceId + 2, baseFaceId + 3));\n       geo.faces.push(new TF3(baseFaceId, baseFaceId + 3, baseFaceId + 4));\n       for (var j = geo.faces.length - 3, lim = geo.faces.length; j < lim; j++) geo.faces[j].color = color;\n    }\n}\n\ndrawNucleicAcidLadder(group, atomlist) {\n   var geo = new THREE.Geometry();\n   var lineGeo = new THREE.Geometry();\n   var baseAtoms = [\"N1\", \"C2\", \"N3\", \"C4\", \"C5\", \"C6\", \"N9\", \"C8\", \"N7\"];\n   var currentChain, currentResi, currentComponent = new Array(baseAtoms.length);\n   var color = new TCo(0xcc0000);\n   \n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]];\n      if (atom == undefined || atom.hetflag) continue;\n\n      if (atom.resi != currentResi || atom.chain != currentChain) {\n         this.drawNucleicAcidLadderSub(geo, lineGeo, currentComponent, color);\n         currentComponent = new Array(baseAtoms.length);\n      }\n      var pos = baseAtoms.indexOf(atom.atom);\n      if (pos != -1) currentComponent[pos] = new TV3(atom.x, atom.y, atom.z);\n      if (atom.atom == 'O3\\'') color = new TCo(atom.color);\n      currentResi = atom.resi; currentChain = atom.chain;\n   }\n   this.drawNucleicAcidLadderSub(geo, lineGeo, currentComponent, color);\n   geo.computeFaceNormals();\n   var mat = new THREE.MeshLambertMaterial();\n   mat.vertexColors = THREE.VertexColors;\n   var mesh = new THREE.Mesh(geo, mat);\n   mesh.doubleSided = true;\n   group.add(mesh);\n}\n\ndrawNucleicAcidStick(group, atomlist) {\n   var currentChain, currentResi, start = null, end = null;\n   \n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]];\n      if (atom == undefined || atom.hetflag) continue;\n\n      if (atom.resi != currentResi || atom.chain != currentChain) {\n         if (start != null && end != null)\n            this.drawCylinder(group, new TV3(start.x, start.y, start.z), \n                              new TV3(end.x, end.y, end.z), 0.3, start.color, true);\n         start = null; end = null;\n      }\n      if (atom.atom == 'O3\\'') start = atom;\n      if (atom.resn == '  A' || atom.resn == '  G' || atom.resn == ' DA' || atom.resn == ' DG') {\n         if (atom.atom == 'N1')  end = atom; // N1(AG), N3(CTU)\n      } else if (atom.atom == 'N3') {\n         end = atom;\n      }\n      currentResi = atom.resi; currentChain = atom.chain;\n   }\n   if (start != null && end != null)\n      this.drawCylinder(group, new TV3(start.x, start.y, start.z), \n                        new TV3(end.x, end.y, end.z), 0.3, start.color, true);\n}\n\ndrawNucleicAcidLine(group, atomlist) {\n   var currentChain, currentResi, start = null, end = null;\n   var geo = new THREE.Geometry();\n\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]];\n      if (atom == undefined || atom.hetflag) continue;\n\n      if (atom.resi != currentResi || atom.chain != currentChain) {\n         if (start != null && end != null) {\n            geo.vertices.push(new TV3(start.x, start.y, start.z));\n            geo.colors.push(new TCo(start.color));\n            geo.vertices.push(new TV3(end.x, end.y, end.z));\n            geo.colors.push(new TCo(start.color));\n         }\n         start = null; end = null;\n      }\n      if (atom.atom == 'O3\\'') start = atom;\n      if (atom.resn == '  A' || atom.resn == '  G' || atom.resn == ' DA' || atom.resn == ' DG') {\n         if (atom.atom == 'N1')  end = atom; // N1(AG), N3(CTU)\n      } else if (atom.atom == 'N3') {\n         end = atom;\n      }\n      currentResi = atom.resi; currentChain = atom.chain;\n   }\n   if (start != null && end != null) {\n      geo.vertices.push(new TV3(start.x, start.y, start.z));\n      geo.colors.push(new TCo(start.color));\n      geo.vertices.push(new TV3(end.x, end.y, end.z));\n      geo.colors.push(new TCo(start.color));\n    }\n   var mat =  new THREE.LineBasicMaterial({linewidth: 1, linejoin: false});\n   mat.linewidth = 1.5; mat.vertexColors = true;\n   var line = new THREE.Line(geo, mat, THREE.LinePieces);\n   group.add(line);\n}\n\ndrawCartoonNucleicAcid(group, atomlist, div, thickness) {\n        this.drawStrandNucleicAcid(group, atomlist, 2, div, true, undefined, thickness);\n}\n\ndrawStrandNucleicAcid(group, atomlist, num, div, fill, nucleicAcidWidth, thickness) {\n   nucleicAcidWidth = nucleicAcidWidth || this.nucleicAcidWidth;\n   div = div || this.axisDIV;\n   num = num || this.nucleicAcidStrandDIV;\n   var points = []; for (var k = 0; k < num; k++) points[k] = [];\n   var colors = [];\n   var currentChain, currentResi, currentO3;\n   var prevOO = null;\n\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]];\n      if (atom == undefined) continue;\n\n      if ((atom.atom == 'O3\\'' || atom.atom == 'OP2') && !atom.hetflag) {\n         if (atom.atom == 'O3\\'') { // to connect 3' end. FIXME: better way to\n\t\t\t\t\t\t\t\t\t// do?\n            if (currentChain != atom.chain || currentResi + 1 != atom.resi) {               \n               if (currentO3) {\n                  for (var j = 0; j < num; j++) {\n                     var delta = -1 + 2 / (num - 1) * j;\n                     points[j].push(new TV3(currentO3.x + prevOO.x * delta, \n                      currentO3.y + prevOO.y * delta, currentO3.z + prevOO.z * delta));\n                  }\n               }\n               if (fill) this.drawStrip(group, points[0], points[1], colors, div, thickness);\n               for (var j = 0; !thickness && j < num; j++)\n                  this.drawSmoothCurve(group, points[j], 1 ,colors, div);\n               var points = []; for (var k = 0; k < num; k++) points[k] = [];\n               colors = [];\n               prevOO = null;\n            }\n            currentO3 = new TV3(atom.x, atom.y, atom.z);\n            currentChain = atom.chain;\n            currentResi = atom.resi;\n            colors.push(atom.color);\n         } else { // OP2\n            if (!currentO3) {prevOO = null; continue;} // for 5' phosphate\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// (e.g. 3QX3)\n            var O = new TV3(atom.x, atom.y, atom.z);\n            O.subSelf(currentO3);\n            O.normalize().multiplyScalar(nucleicAcidWidth);  // TODO:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// refactor\n            if (prevOO != undefined && O.dot(prevOO) < 0) {\n               O.negate();\n            }\n            prevOO = O;\n            for (var j = 0; j < num; j++) {\n               var delta = -1 + 2 / (num - 1) * j;\n               points[j].push(new TV3(currentO3.x + prevOO.x * delta, \n                 currentO3.y + prevOO.y * delta, currentO3.z + prevOO.z * delta));\n            }\n            currentO3 = null;\n         }\n      }\n   }\n   if (currentO3) {\n      for (var j = 0; j < num; j++) {\n         var delta = -1 + 2 / (num - 1) * j;\n         points[j].push(new TV3(currentO3.x + prevOO.x * delta, \n           currentO3.y + prevOO.y * delta, currentO3.z + prevOO.z * delta));\n      }\n   }\n   if (fill) this.drawStrip(group, points[0], points[1], colors, div, thickness); \n   for (var j = 0; !thickness && j < num; j++)\n      this.drawSmoothCurve(group, points[j], 1 ,colors, div);\n}\n\ndrawDottedLines(group, points, color) {\n    var geo = new THREE.Geometry();\n    var step = 0.3;\n\n    for (var i = 0, lim = Math.floor(points.length / 2); i < lim; i++) {\n        var p1 = points[2 * i], p2 = points[2 * i + 1];\n        var delta = p2.clone().subSelf(p1);\n        var dist = delta.length();\n        delta.normalize().multiplyScalar(step);\n        var jlim =  Math.floor(dist / step);\n        for (var j = 0; j < jlim; j++) {\n           var p = new TV3(p1.x + delta.x * j, p1.y + delta.y * j, p1.z + delta.z * j);\n           geo.vertices.push(p);\n        }\n        if (jlim % 2 == 1) geo.vertices.push(p2);\n    }\n\n    var mat = new THREE.LineBasicMaterial({'color': color.getHex()});\n    mat.linewidth = 2;\n    var line = new THREE.Line(geo, mat, THREE.LinePieces);\n    group.add(line);\n}\n\ngetAllAtoms() {\n   var ret = [];\n   for (var i in this.atoms) {\n      ret.push(this.atoms[i].serial);\n   }\n   return ret;\n}\n\n// Probably I can refactor using higher-order functions.\ngetHetatms(atomlist) {\n   var ret = [];\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      if (atom.hetflag) ret.push(atom.serial);\n   }\n   return ret;\n}\n\nremoveSolvents(atomlist) {\n   var ret = [];\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      if (atom.resn != 'HOH') ret.push(atom.serial);\n   }\n   return ret;\n}\n\ngetProteins(atomlist) {\n   var ret = [];\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      if (!atom.hetflag) ret.push(atom.serial);\n   }\n   return ret;\n}\n\n// TODO: Test\nexcludeAtoms(atomlist, deleteList) {\n   var ret = [];\n   var blackList = new Object();\n   for (var _i in deleteList) blackList[deleteList[_i]] = true;\n\n   for (var _i in atomlist) {\n      var i = atomlist[_i];\n\n      if (!blackList[i]) ret.push(i);\n   }\n   return ret;\n}\n\ngetSidechains(atomlist) {\n   var ret = [];\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      if (atom.hetflag) continue;\n      if (atom.atom == 'C' || atom.atom == 'O' || (atom.atom == 'N' && atom.resn != \"PRO\")) continue;\n      ret.push(atom.serial);\n   }\n   return ret;\n}\n\ngetAtomsWithin(atomlist, extent) {\n   var ret = [];\n\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      if (atom.x < extent[0][0] || atom.x > extent[1][0]) continue;\n      if (atom.y < extent[0][1] || atom.y > extent[1][1]) continue;\n      if (atom.z < extent[0][2] || atom.z > extent[1][2]) continue;\n      ret.push(atom.serial);      \n   }\n   return ret;\n}\n\ngetExtent(atomlist) {\n\tvar xmin = 9999; \n\t  var ymin = 9999;\n\t  var zmin = 9999;\n\t  \n\t  \n\t  \n\t  var xmax = -9999;\n\t  var ymax = -9999;\n\t  var zmax = -9999;\n\t  \n\t  var xsum = 0;\n\t  var ysum = 0;\n\t  var zsum = 0;\n\t  var cnt = 0;\n\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n      cnt++;\n      xsum += atom.x; ysum += atom.y; zsum += atom.z;\n\n      xmin = (xmin < atom.x) ? xmin : atom.x;\n      ymin = (ymin < atom.y) ? ymin : atom.y;\n      zmin = (zmin < atom.z) ? zmin : atom.z;\n      xmax = (xmax > atom.x) ? xmax : atom.x;\n      ymax = (ymax > atom.y) ? ymax : atom.y;\n      zmax = (zmax > atom.z) ? zmax : atom.z;\n   }\n   return [[xmin, ymin, zmin], [xmax, ymax, zmax], [xsum / cnt, ysum / cnt, zsum / cnt]];\n}\n\ngetResiduesById(atomlist, resi) {\n   var ret = [];\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      if (resi.indexOf(atom.resi) != -1) ret.push(atom.serial);\n   }\n   return ret;\n}\n\ngetResidueBySS(atomlist, ss) {\n   var ret = [];\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      if (ss.indexOf(atom.ss) != -1) ret.push(atom.serial);\n   }\n   return ret;\n}\n\ngetChain(atomlist, chain) {\n   var ret = [], chains = {};\n   chain = chain.toString(); // concat if Array\n   for (var i = 0, lim = chain.length; i < lim; i++) chains[chain.substr(i, 1)] = true;\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      if (chains[atom.chain]) ret.push(atom.serial);\n   }\n   return ret;\n}\n\n// for HETATM only\ngetNonbonded(atomlist, chain) {\n   var ret = [];\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      if (atom.hetflag && atom.bonds.length == 0) ret.push(atom.serial);\n   }\n   return ret;\n}\n\ncolorByAtom(atomlist, colors) {\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      var c = colors[atom.elem];\n      if (c == undefined) c = this.ElementColors[atom.elem];\n      if (c == undefined) c = this.defaultColor;\n      atom.color = c;\n   }\n}\n\n\n// MEMO: Color only CA. maybe I should add atom.cartoonColor.\ncolorByStructure(atomlist, helixColor, sheetColor, colorSidechains) {\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      if (!colorSidechains && (atom.atom != 'CA' || atom.hetflag)) continue;\n      if (atom.ss[0] == 's') atom.color = sheetColor;\n      else if (atom.ss[0] == 'h') atom.color = helixColor;\n   }\n}\n\ncolorByBFactor(atomlist, colorSidechains) {\n   var minB = 1000, maxB = -1000;\n\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      if (atom.hetflag) continue;\n      if (colorSidechains || atom.atom == 'CA' || atom.atom == 'O3\\'') {\n         if (minB > atom.b) minB = atom.b;\n         if (maxB < atom.b) maxB = atom.b;\n      }\n   }\n\n   var mid = (maxB + minB) / 2;\n\n   var range = (maxB - minB) / 2;\n   if (range < 0.01 && range > -0.01) return;\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      if (atom.hetflag) continue;\n      if (colorSidechains || atom.atom == 'CA' || atom.atom == 'O3\\'') {\n         var color = new TCo(0);\n         if (atom.b < mid)\n            color.setHSV(0.667, (mid - atom.b) / range, 1);\n         else\n            color.setHSV(0, (atom.b - mid) / range, 1);\n         atom.color = color.getHex();\n      }\n   }\n}\n\ncolorByChain(atomlist, colorSidechains) {\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      if (atom.hetflag) continue;\n      if (colorSidechains || atom.atom == 'CA' || atom.atom == 'O3\\'') {\n         var color = new TCo(0);\n         color.setHSV((atom.chain.charCodeAt(0) * 5) % 17 / 17.0, 1, 0.9);\n         atom.color = color.getHex();\n      }\n   }\n}\n\ncolorByResidue(atomlist, residueColors) {\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      c = residueColors[atom.resn]\n      if (c != undefined) atom.color = c;\n   }\n}\n\ncolorAtoms(atomlist, c) {\n   for (var i in atomlist) {\n      var atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      atom.color = c;\n   }\n}\n\ncolorByPolarity(atomlist, polar, nonpolar) {\n   var polarResidues = ['ARG', 'HIS', 'LYS', 'ASP', 'GLU', 'SER', 'THR', 'ASN', 'GLN', 'CYS'];\n   var nonPolarResidues = ['GLY', 'PRO', 'ALA', 'VAL', 'LEU', 'ILE', 'MET', 'PHE', 'TYR', 'TRP'];\n   var colorMap = {};\n   for (var i in polarResidues) colorMap[polarResidues[i]] = polar;\n   for (i in nonPolarResidues) colorMap[nonPolarResidues[i]] = nonpolar;\n   this.colorByResidue(atomlist, colorMap);   \n}\n\n// TODO: Add near(atomlist, neighbor, distanceCutoff)\n// TODO: Add expandToResidue(atomlist)\n\ncolorChainbow(atomlist, colorSidechains) {\n   var cnt = 0;\n   var atom, i;\n   for (i in atomlist) {\n      atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      if ((colorSidechains || atom.atom != 'CA' || atom.atom != 'O3\\'') && !atom.hetflag)\n         cnt++;\n   }\n\n   var total = cnt;\n   cnt = 0;\n   for (i in atomlist) {\n      atom = this.atoms[atomlist[i]]; if (atom == undefined) continue;\n\n      if ((colorSidechains || atom.atom != 'CA' || atom.atom != 'O3\\'') && !atom.hetflag) {\n         var color = new TCo(0);\n         color.setHSV(240.0 / 360 * (1 - cnt / total), 1, 0.9);\n         atom.color = color.getHex();\n         cnt++;\n      }\n   }\n}\n\ndrawSymmetryMates2(group, asu, matrices) {\n   if (matrices == undefined) return;\n   asu.matrixAutoUpdate = false;\n\n   var cnt = 1;\n   this.protein.appliedMatrix = new THREE.Matrix4();\n   for (var i = 0; i < matrices.length; i++) {\n      var mat = matrices[i];\n      if (mat == undefined || mat.isIdentity()) continue;\n      console.log(mat);\n      var symmetryMate = THREE.SceneUtils.cloneObject(asu);\n      symmetryMate.matrix = mat;\n      group.add(symmetryMate);\n      for (var j = 0; j < 16; j++) this.protein.appliedMatrix.elements[j] += mat.elements[j];\n      cnt++;\n   }\n   this.protein.appliedMatrix.multiplyScalar(cnt);\n}\n\n\ndrawSymmetryMatesWithTranslation2(group, asu, matrices) {\n   if (matrices == undefined) return;\n   var p = this.protein;\n   asu.matrixAutoUpdate = false;\n\n   for (var i = 0; i < matrices.length; i++) {\n      var mat = matrices[i];\n      if (mat == undefined) continue;\n\n      for (var a = -1; a <=0; a++) {\n         for (var b = -1; b <= 0; b++) {\n             for (var c = -1; c <= 0; c++) {\n                var translationMat = new THREE.Matrix4().makeTranslation(\n                   p.ax * a + p.bx * b + p.cx * c,\n                   p.ay * a + p.by * b + p.cy * c,\n                   p.az * a + p.bz * b + p.cz * c);\n                var symop = mat.clone().multiplySelf(translationMat);\n                if (symop.isIdentity()) continue;\n                var symmetryMate = THREE.SceneUtils.cloneObject(asu);\n                symmetryMate.matrix = symop;\n                group.add(symmetryMate);\n             }\n         }\n      }\n   }\n}\n\ncreateTextTex(text, size, color) {\n\t\n   var canvas = document.createElement(\"canvas\");\n   canvas.style.backgroundColor = \"rgba(0, 0, 0, 0.0)\";\n   var ctx = canvas.getContext(\"2d\");\n   ctx.font = size + \"px Arial\";\n   canvas.width = ctx.measureText(text).width;\n   canvas.height = size; // This resets fonts, so we have to set it again\n   ctx.fillStyle = color ? color : \"rgba(0, 0, 0, 1.0)\";\n   ctx.strokeStyle = ctx.fillStyle;\n   ctx.font = size + \"px Arial\";\n   ctx.fillText(text, 0, size * 0.9);\n// document.getElementById(\"glmol01\").appendChild(canvas);\n   var tex = new THREE.Texture(canvas);\n   tex.needsUpdate = true;\n   tex.magFilter = tex.minFilter = THREE.LinearFilter;\n   return tex;\n}\n\ngetBillboardMesh () {\n   if (this.bbmesh) return this.bbmesh;\n\n   var geo = new THREE.Geometry();\n   for (var i = 0; i < 6; i++)\n      geo.vertices.push(new THREE.Vector3(0, 0, 0));\n   geo.faces.push(new THREE.Face3(0, 1, 2));\n   geo.faces.push(new THREE.Face3(0, 2, 3));\n   geo.faceVertexUvs[0].push([new THREE.UV(0, 0), new THREE.UV(1, 1), new THREE.UV(0, 1)]);\n   geo.faceVertexUvs[0].push([new THREE.UV(0, 0), new THREE.UV(1, 0), new THREE.UV(1, 1)]);\n   return (this.bbmesh = geo);\n}\n\n\n\nbillboard (tex) {\n   var geo = this.getBillboardMesh();\n   var sm = new THREE.ShaderMaterial({uniforms: \n     {map: {type: 't', value: 0, texture: tex}, \n      width: {type: 'f', value: tex.image.width}, height: {type: 'f', value: tex.image.height}}});\n   sm.vertexShader = vs_billboard;\n   sm.fragmentShader = fs_billboard;\n   return new THREE.Mesh(geo, sm);\n}\n\ndefineRepresentation() {\n   var all = this.getAllAtoms();\n   var hetatm = this.removeSolvents(this.getHetatms(all));\n   this.colorByAtom(all, {});\n   this.colorByChain(all);\n\n   this.drawAtomsAsSphere(this.modelGroup, hetatm, this.sphereRadius); \n   this.drawMainchainCurve(this.modelGroup, all, this.curveWidth, 'P');\n   this.drawCartoon(this.modelGroup, all, this.curveWidth);\n}\n\ngetView() {\n   if (!this.modelGroup) return [0, 0, 0, 0, 0, 0, 0, 1];\n   var pos = this.modelGroup.position;\n   var q = this.rotationGroup.quaternion;\n   return [pos.x, pos.y, pos.z, this.rotationGroup.position.z, q.x, q.y, q.z, q.w];\n}\n\nsetView(arg) {\n   if (!this.modelGroup || !this.rotationGroup) return;\n   this.modelGroup.position.x = arg[0];\n   this.modelGroup.position.y = arg[1];\n   this.modelGroup.position.z = arg[2];\n   this.rotationGroup.position.z = arg[3];\n   this.rotationGroup.quaternion.x = arg[4];\n   this.rotationGroup.quaternion.y = arg[5];\n   this.rotationGroup.quaternion.z = arg[6];\n   this.rotationGroup.quaternion.w = arg[7];\n   this.show();\n}\n\nsetBackground(hex, a) {\n   a = a | 1.0;\n   this.bgColor = hex;\n   this.renderer.setClearColorHex(hex, a);\n   this.scene.fog.color = new TCo(hex);\n}\n\ninitializeScene() {\n   // CHECK: Should I explicitly call scene.deallocateObject?\n   this.scene = new THREE.Scene();\n   this.scene.fog = new THREE.Fog(this.bgColor, 100, 200);\n\n   this.modelGroup = new THREE.Object3D();\n   this.rotationGroup = new THREE.Object3D();\n   this.rotationGroup.useQuaternion = true;\n   this.rotationGroup.quaternion = new THREE.Quaternion(1, 0, 0, 0);\n   \n   \n   this.rotationGroup.add(this.modelGroup);\n\n   this.scene.add(this.rotationGroup);\n   this.setupLights(this.scene);\n}\n\nzoomInto(atomlist, keepSlab) {\n   var tmp = this.getExtent(atomlist);\n   var center = new TV3(tmp[2][0], tmp[2][1], tmp[2][2]);\n   if (this.protein.appliedMatrix) {center = this.protein.appliedMatrix.multiplyVector3(center);}\n   this.modelGroup.position = center.multiplyScalar(-1);\n   \n   \n   var x = tmp[1][0] - tmp[0][0], y = tmp[1][1] - tmp[0][1], z = tmp[1][2] - tmp[0][2];\n\n   var maxD = Math.sqrt(x * x + y * y + z * z);\n   if (maxD < 25) maxD = 25;\n\n   if (!keepSlab) {\n      this.slabNear = -maxD / 1.9;\n      this.slabFar = maxD / 3;\n   }\n\n   this.rotationGroup.position.z = maxD * 0.35 / Math.tan(Math.PI / 180.0 * this.camera.fov / 2) - 150;\n   this.rotationGroup.quaternion = new THREE.Quaternion(1, 0, 0, 0);\n   \n   \n}\n\nrebuildScene() {\n   var time = new Date();\n\n   var view = this.getView();\n   this.initializeScene();\n   this.defineRepresentation();\n   this.setView(view);\n\n   console.log(\"builded scene in \" + (+new Date() - time) + \"ms\");\n}\n\nloadMolecule(repressZoom) {\n   this.loadMoleculeStr(repressZoom, $('#' + this.id + '_src').val());\n}\n\nloadMoleculeStr(repressZoom, source) {\n   var time = new Date();\n\n   this.protein = {sheet: [], helix: [], biomtChains: '', biomtMatrices: [], symMat: [], pdbID: '', title: ''};\n   this.atoms = [];\n\n   this.parsePDB2(source);\n   if (!this.parseSDF(source)) this.parseXYZ(source);\n   console.log(\"parsed in \" + (+new Date() - time) + \"ms\");\n   \n   var title = $('#' + this.id + '_pdbTitle');\n   var titleStr = '';\n   if (this.protein.pdbID != '') titleStr += '<a href=\"http://www.rcsb.org/pdb/explore/explore.do?structureId=' + this.protein.pdbID + '\">' + this.protein.pdbID + '</a>';\n   if (this.protein.title != '') titleStr += '<br>' + this.protein.title;\n   title.html(titleStr);\n\n   this.rebuildScene(true);\n   if (repressZoom == undefined || !repressZoom) this.zoomInto(this.getAllAtoms());\n\n   this.show();\n }\n\nsetSlabAndFog() {\n   var center = this.rotationGroup.position.z - this.camera.position.z;\n   if (center < 1) center = 1;\n   this.camera.near = center + this.slabNear;\n   if (this.camera.near < 1) this.camera.near = 1;\n   this.camera.far = center + this.slabFar;\n   if (this.camera.near + 1 > this.camera.far) this.camera.far = this.camera.near + 1;\n   if (this.camera instanceof THREE.PerspectiveCamera) {\n      this.camera.fov = this.fov;\n   } else {\n      this.camera.right = center * Math.tan(Math.PI / 180 * this.fov);\n      this.camera.left = - this.camera.right;\n      this.camera.top = this.camera.right / this.ASPECT;\n      this.camera.bottom = - this.camera.top;\n   }\n   this.camera.updateProjectionMatrix();\n   this.scene.fog.near = this.camera.near + this.fogStart * (this.camera.far - this.camera.near);\n// if (this.scene.fog.near > center) this.scene.fog.near = center;\n   this.scene.fog.far = this.camera.far;\n}\n\nadjustPos(ev) {\n   var x = ev.pageX, y = ev.pageY;\n   if (ev.originalEvent.targetTouches && ev.originalEvent.targetTouches[0]) {\n      x = ev.originalEvent.targetTouches[0].pageX;\n      y = ev.originalEvent.targetTouches[0].pageY;\n   }\n   ev.x = x; ev.y = y;\n}\n\ntoScreenPosition(obj, camera,width,height)\n{\n    var vector = new THREE.Vector3();\n\n    var widthHalf = 0.5*width;\n    var heightHalf = 0.5*height;\n\n    // obj.updateMatrixWorld();\n    // vector.setFromMatrixPosition(obj.matrixWorld);\n    pepe = vector.projectVector(vector,camera);\n    vector = pepe\n\n    vector.x = ( vector.x * widthHalf ) + widthHalf;\n    vector.y = - ( vector.y * heightHalf ) + heightHalf;\n\n    return { \n        x: vector.x,\n        y: vector.y\n    };\n\n}\n\n\nenableMouse() {\n   var me = this, glDOM = $(this.renderer.domElement); \n\n   // TODO: Better touch panel support.\n   // Contribution is needed as I don't own any iOS or Android device with\n\t// WebGL support.\n   glDOM.bind('mousedown touchstart', function(ev) {\n      ev.preventDefault();\n      if (!me.scene) return;\n      me.adjustPos(ev);\n      if (ev.x == undefined) return;\n      me.isDragging = true;\n      me.mouseButton = ev.which;\n      me.mouseStartX = ev.x;\n      me.mouseStartY = ev.y;\n      me.cq = me.rotationGroup.quaternion;\n      me.cz = me.rotationGroup.position.z;\n      me.currentModelPos = me.modelGroup.position.clone();\n      me.cslabNear = me.slabNear;\n      me.cslabFar = me.slabFar;\n    });\n\n   glDOM.bind('DOMMouseScroll mousewheel', function(ev) { // Zoom\n      ev.preventDefault();\n      if (!me.scene) return;\n      var scaleFactor = (me.rotationGroup.position.z - me.CAMERA_Z) * 0.85;\n      if (ev.originalEvent.detail) { // Webkit\n         me.rotationGroup.position.z += scaleFactor * ev.originalEvent.detail / 10;\n      } else if (ev.originalEvent.wheelDelta) { // Firefox\n         me.rotationGroup.position.z -= scaleFactor * ev.originalEvent.wheelDelta / 400;\n      }\n      console.log(ev.originalEvent.wheelDelta, ev.originalEvent.detail, me.rotationGroup.position.z);\n      me.show();\n   });\n   glDOM.bind(\"contextmenu\", function(ev) {ev.preventDefault();});\n   \n   $('#body').bind('mouseup touchend', function(ev) {\n\t      me.isDragging = false;\n\t      \n\t      me.adjustPos(ev); var x = ev.x, y = ev.y;\n\t      if (x == undefined) return;\n\t      var dx = x - me.mouseStartX, dy = y - me.mouseStartY;\n\t      var r = Math.sqrt(dx * dx + dy * dy);      \n\t      if (r > 2) return;\n\t      x -= me.container.position().left; y -= me.container.position().top;\n\n\t      var mvMat = new THREE.Matrix4().multmultiplySelf(amera.matrixWorldInverse, me.modelGroup.matrixWorld);\n\t      var pmvMat = new THREE.Matrix4().multiply(me.camera.projectionMatrix, mvMat);\n\t      var pmvMatInv = new THREE.Matrix4().getInverse(pmvMat);\n\t      var tx = x / me.WIDTH * 2 - 1, ty = 1 - y / me.HEIGHT * 2;\n\t      var nearest = [1, undefined, new TV3(0, 0, 1000)];\n\t      \n\t     /*\n\t\t\t * \n\t\t\t * var vector = new THREE.Vector3();\n\t\t\t * \n\t\t\t * vector.set( (x / me.container.width() ) * 2 - 1, - ( y\n\t\t\t * /me.container.height() ) * 2 + 1, 0.5 );\n\t\t\t * \n\t\t\t * //vector.unproject( me.camera );\n\t\t\t * \n\t\t\t * var matrix = new THREE.Matrix4();\n\t\t\t * \n\t\t\t * matrix = matrix.multiply( me.camera.matrixWorld,\n\t\t\t * matrix.getInverse( me.camera.projectionMatrix ) );\n\t\t\t * \n\t\t\t * function applyProjection (vector, m ) { // input: THREE.Matrix4\n\t\t\t * projection matrix\n\t\t\t * \n\t\t\t * var x = vector.x, y = vector.y, z = vector.z;\n\t\t\t * \n\t\t\t * var e = m.elements; var d = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] *\n\t\t\t * z + e[ 15 ] ); // perspective divide\n\t\t\t * \n\t\t\t * vector.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) *\n\t\t\t * d; vector.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) *\n\t\t\t * d; vector.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) *\n\t\t\t * d;\n\t\t\t * \n\t\t\t *  }\n\t\t\t * \n\t\t\t * //return this.applyProjection( matrix );\n\t\t\t * applyProjection(vector,matrix)\n\t\t\t * \n\t\t\t * \n\t\t\t * \n\t\t\t * var dir = vector.sub( vector,me.camera.position ).normalize();\n\t\t\t * \n\t\t\t * var distance = - me.camera.position.z / dir.z;\n\t\t\t * \n\t\t\t * var pos =\n\t\t\t * me.camera.position.clone().add(me.camera.position.clone(),\n\t\t\t * dir.multiplyScalar( distance ) ); tx = pos.x ty = pos.y\n\t\t\t * \n\t\t\t */\n\t      \n\t      \n\t      \n\t      \n\t      for (var i = 0, ilim = me.atoms.length; i < ilim; i++) {\n\t         var atom = me.atoms[i]; if (atom == undefined) continue;\n\t         if (atom.x == undefined) continue;\n\t         if (atom.resn == \"HOH\") continue;\n\n// if(atom.resn == \"CYS\"){\n// var bb = me.billboard(me.createTextTex(atom.chain + \":\" + atom.resn + \":\" +\n// atom.resi + \":\" + atom.atom, \"30\", \"#ffffff\"));\n// bb.position.set(atom.x, atom.y, atom.z);\n// me.modelGroup.add(bb);\n// }\n\t         // juaja = toScreenPosition(atom,me.camera,me.WIDTH,me.HEIGHT)\n\t         \n\t         \n\t         \n\t         // ----------------------------------------------------------\n\t         \n\t         var matrix = new THREE.Matrix4();\n\t         \n\t         var p = new THREE.Vector3(atom.x, atom.y, atom.z);\n\t         \n\t         \n\t         juan = matrix.multiply( me.camera.matrixWorld, matrix.getInverse( me.camera.projectionMatrix ) );\n\t    \tmatrix = juan\n\t    \t function applyProjection (vector, m ) {\n\n\t    \t\t// input: THREE.Matrix4 projection matrix\n\n\t    \t\tvar x = vector.x, y = vector.y, z = vector.z;\n\n\t    \t\tvar e = m.elements;\n\t    \t\tvar d = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] ); // perspective\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// divide\n\n\t    \t\tvector.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ] ) * d;\n\t    \t\tvector.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ] ) * d;\n\t    \t\tvector.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * d;\n\n\t    \t\t\n\n\t    \t}\n\t    \t\n\t    \t applyProjection(p,matrix)\n\t    \t p.x = Math.round( (   p.x + 1 ) * me.WIDTH  / 2 ),\n\t\t\t\tp.y = Math.round( ( - p.y + 1 ) * me.HEIGHT / 2 );\n\t\t\t\tp.z = 0;\n\t    \t \n\t         \n\t         \n\t         // ------------------------------------------------------------\n\t         \n\t         \n\t         \n\t         var v = new TV3(atom.x, atom.y, atom.z);\n\t         pmvMat.multiplyVector3(v);\n\t         var r2 = (v.x - tx) * (v.x - tx) + (v.y - ty) * (v.y - ty);\n\t         if (r2 > 0.0005) continue;\n\t         if (v.z < nearest[2].z) nearest = [r2, atom, v];\n\t         if (r2 > 0.0002) continue;\n\t         if (r2 < nearest[0]) nearest = [r2, atom, v];\n\t      }\n\t      var atom = nearest[1]; if (atom == undefined) return;\n\t      var bb = me.billboard(me.createTextTex(atom.chain + \":\" + atom.resn + \":\" + atom.resi + \":\" + atom.atom, \"30\", \"#ffffff\"));\n\t      bb.position.set(atom.x, atom.y, atom.z);\n\t      me.modelGroup.add(bb);\n\t      me.show();\n\t   });\n\n   glDOM.bind('mousemove touchmove', function(ev) { // touchmove\n\t  \n      ev.preventDefault();\n      if (!me.scene) return;\n      if (!me.isDragging) return;\n      var mode = 0;\n      var modeRadio = $('input[name=' + me.id + '_mouseMode]:checked');\n      if (modeRadio.length > 0) mode = parseInt(modeRadio.val());\n\n      me.adjustPos(ev); var x = ev.x, y = ev.y;\n      if (x == undefined) return;\n      var dx = (x - me.mouseStartX) / me.WIDTH;\n      var dy = (y - me.mouseStartY) / me.HEIGHT;\n      var r = Math.sqrt(dx * dx + dy * dy);\n      if (mode == 3 || (me.mouseButton == 3 && ev.ctrlKey)) { // Slab\n          me.slabNear = me.cslabNear + dx * 100;\n          me.slabFar = me.cslabFar + dy * 100;\n      } else if (mode == 2 || me.mouseButton == 3 || ev.shiftKey) { // Zoom\n         var scaleFactor = (me.rotationGroup.position.z - me.CAMERA_Z) * 0.85; \n         if (scaleFactor < 80) scaleFactor = 80;\n         me.rotationGroup.position.z = me.cz - dy * scaleFactor;\n      } else if (mode == 1 || me.mouseButton == 2 || ev.ctrlKey) { // Translate\n         var scaleFactor = (me.rotationGroup.position.z - me.CAMERA_Z) * 0.85;\n         if (scaleFactor < 20) scaleFactor = 20;\n         var translationByScreen = new TV3(- dx * scaleFactor, - dy * scaleFactor, 0);\n         var q = me.rotationGroup.quaternion;\n         var qinv = new THREE.Quaternion(q.x, q.y, q.z, q.w).inverse().normalize(); \n         var translation = qinv.multiplyVector3(translationByScreen);\n         me.modelGroup.position.x = me.currentModelPos.x + translation.x;\n         me.modelGroup.position.y = me.currentModelPos.y + translation.y;\n         me.modelGroup.position.z = me.currentModelPos.z + translation.z;\n      } else if ((mode == 0 || me.mouseButton == 1) && r != 0) { // Rotate\n         var rs = Math.sin(r * Math.PI) / r;\n         me.dq.x = Math.cos(r * Math.PI); \n         me.dq.y = 0;\n         me.dq.z =  rs * dx; \n         me.dq.w =  rs * dy;\n         me.rotationGroup.quaternion = new THREE.Quaternion(1, 0, 0, 0); \n         \n         me.rotationGroup.quaternion.multiplySelf(me.dq);\n         me.rotationGroup.quaternion.multiplySelf(me.cq);\n      }\n      me.show();\n   });\n}\n\n\n\n\nshow() {\n   if (!this.scene) return;\n\n   var time = new Date();\n   this.setSlabAndFog();\n   this.renderer.render(this.scene, this.camera);\n   console.log(\"rendered in \" + (+new Date() - time) + \"ms\");\n}\n\n// For scripting\ndoFunc(func) {\n    func(this);\n}\n\n\ngetAtomsByName( atomlist ) {\n    var ret = []\n    for ( var i in atomlist ) {\n        atom = atomlist[i].split( \".\" );\n        chain = atom[0];\n        resi = atom[1];\n        atom = atom[2];\n\n        for ( var j in this.atoms ) {\n            if ( this.atoms[j].chain == chain && this.atoms[j].resi == resi\n                && this.atoms[j].atom == atom ) {\n                ret.push( this.atoms[j].serial );\n            }\n        }\n    }\n    return ret\n}\n\nresidue_atoms( res_ids ) {\n\n    if ( $.isArray( res_ids ) ) {\n        return $.grep( this.atoms, function( x ) {\n            if ( typeof x != \"undefined\" ) {\n\n                return res_ids.indexOf( x.chain + \".\" + x.resi ) != -1\n            }\n        });\n    } else {\n        return $.grep( this.atoms, function( x ) {\n            if ( typeof x != \"undefined\" ) {\n\n                return [x.chain, x.resi].join( \".\" ) == res_ids\n            }\n        });\n    }\n}\n\nselect_residues( res_ids ) {\n\n    this.selected_atoms = $.map( this.residue_atoms( res_ids ), function( x ) {\n        return x.serial;\n    });\n    if ( this.selected_atoms.length > 0 ) {\n        //this.zoomInto( this.selected_atoms )\n        this.refreshAll();\n    }\n\n}\n\nchain_atoms( chain ) {\n    var atmIndexes = [];\n    $.each( this.atoms, function( i, atm ) {\n        if ( ( typeof ( atm ) != \"undefined\" ) && ( atm.chain == chain )\n            && ( atm.resn != \"STP\" ) ) {\n            atmIndexes.push( i )\n        }\n    });\n    return this.removeSolvents( atmIndexes )\n}\n\ndefineRepresentation() {\n    this._render_selected();\n    $.each( this.layers, function( i, layer ) {\n        layer.render();\n    }.bind( this ) );\n\n}\n_render_selected() {\n\n    if (this.selected_atoms && this.selected_atoms.length > 0 ) {\n\n        var atomsIndex = this.selected_atoms;\n        this.selected_atoms_renderer.render( this, this.getHetatms( atomsIndex ) );\n        this.selected_atoms_bond_renderer.render( this, this\n            .removeSolvents( atomsIndex ) );\n    }\n}\n\nadd_to_selected( atom_serial ) {\n    if ( $.isArray( atom_serial ) ) {\n        $.each( atom_serial, function( i, x ) {\n            this.selected_atoms.push( x );\n        }.bind( this ) )\n    } else {\n        this.selected_atoms.push( atom_serial );\n    }\n    this.refreshAll()\n}\n\nremove_from_selected( atom_serial ) {\n    if ( $.isArray( atom_serial ) ) {\n        this.selected_atoms = $.grep( this.selected_atoms, function( x ) {\n            return atom_serial.indexOf( x ) == -1\n        });\n    } else {\n        this.selected_atoms = $.grep( this.selected_atoms, function( x ) {\n            return x != atom_serial\n        });\n    }\n    this.refreshAll()\n}\nclear_selection() {\n    this.selected_atoms = [];\n    this.refreshAll()\n}\nselect_by_atom_name( atom_name_list ) {\n    this.selected_atoms = this.getAtomsByName( atom_name_list );\n    this.refreshAll()\n}\n\nload_data( data ) {\n    this.data = data;\n    this.loadMoleculeStr( undefined, this.data )\n\n    this.chains = $.unique( $.map( this.atoms, function( atm, i ) {\n        if ( ( typeof ( atm ) != \"undefined\" ) && ( atm.resn != \"STP\" ) )\n            return atm.chain\n    }) );\n    this.chains = $.unique( this.chains.sort() )\n    //this.data_loaded()\n    this.refreshAll()\n}\nrefreshAll() {\n    this.rebuildScene();\n    this.show();\n}\n\nadd_layer( layer ) {\n    this.layers.push( layer );\n    layer.glmol = this;\n}\nadd_pdb_str( pdb_str ) {\n\n    var arr = this.data.split( \"\\n\" )\n    var end = arr.length - 3;\n    var foo = [];\n    for ( var i = 0; i <= end; i++ ) {\n        foo.push( arr[i] );\n    }\n\n    this.data = foo.join( '\\n' ) + pdb_str // .join(\"\\n\")\n\n    this.loadMoleculeStr( undefined, this.data );\n    this.refreshAll()\n}\n/**\n * Agrego los métodos que necesito al prototipo de GLmol\n */\nremoveAlphaSpheres( atomlist ) {\n    var ret = [];\n    for ( var i in atomlist ) {\n        var atom = this.atoms[atomlist[i]];\n        if ( atom == undefined )\n            continue;\n\n        if ( atom.resn != 'STP' )\n            ret.push( atom.serial );\n    }\n    return ret;\n}\n\ngetAlphaSpheres( atomlist ) {\n\n    var ret = [];\n    var alpha_pol = [];\n    var alpha_apol = [];\n    for ( var i in atomlist ) {\n        var atom = this.atoms[atomlist[i]];\n        if ( atom == undefined )\n            continue;\n\n        if ( atom.resn == 'STP' ) {\n            if ( atom.atom == 'POL' ) {\n                alpha_pol.push( atom.serial )\n            } else if ( atom.atom == 'APOL' ) {\n                alpha_apol.push( atom.serial )\n            }\n        }\n    }\n    return new Array( alpha_pol, alpha_apol );\n}\nchain_layers() {\n\n    return $.grep( this.layers, function( l ) {\n        return !( l instanceof Pocket )\n    });\n}\npocket_layers() {\n\n    return $.grep( this.layers, function( l ) {\n        return ( l instanceof Pocket )\n    });\n}\n\ncolorByAtomName( atomlist, residueColors ) {\n    for ( var i in atomlist ) {\n        var atom = this.atoms[atomlist[i]];\n        if ( atom == undefined )\n            continue;\n\n        c = residueColors[atom.atom]\n        if ( c != undefined )\n            atom.color = c;\n    }\n}\n\ndraw_labels( atoms_id ) {\n    var me = this;\n    this._draw_labels( $.map( atoms_id, atom_id => me.atoms[atom_id] ) )\n}\n\n_draw_labels( atoms ) {\n    var me = this;\n    $.each( atoms, function( i, atom ) {\n        var bb = me.billboard( me.createTextTex( me.atom_label_id( atom ), \"60\",\n            \"#ffffff\" ) );\n        bb.position.set( atom.x, atom.y, atom.z );\n        me.atom_labels[me.atom_label_id( atom )] = bb;\n        me.modelGroup.add( bb );\n    }.bind( this ) );\n\n}\natom_label_id( atom ) {\n   //atom.chain + \":\" + ... + + \":\" + atom.atom;\n    return  atom.resn + \":\" + atom.resi;\n\n}\n\n_init_click_event() {\n    var me = this;\n    $( this.container ).bind(\n        'mouseup touchend',\n        function( ev ) {\n            me.isDragging = false;\n\n            me.adjustPos( ev );\n            var x = ev.x, y = ev.y;\n            if ( x == undefined )\n                return;\n            var dx = x - me.mouseStartX, dy = y - me.mouseStartY;\n            var r = Math.sqrt( dx * dx + dy * dy );\n            if ( r > 2 )\n                return;\n            x -= me.container.position().left;\n            y -= me.container.position().top;\n\n            x = ev.offsetX\n            y = ev.offsetY\n\n            var mvMat = new THREE.Matrix4().multiply(\n                me.camera.matrixWorldInverse,\n                me.modelGroup.matrixWorld );\n            var pmvMat = new THREE.Matrix4().multiply(\n                me.camera.projectionMatrix, mvMat );\n            var pmvMatInv = new THREE.Matrix4().getInverse( pmvMat );\n            var tx = x / me.WIDTH * 2 - 1, ty = 1 - y / me.HEIGHT * 2;\n            var nearest = [1, undefined, new TV3( 0, 0, 1000 )];\n\n            for ( var i = 0, ilim = me.atoms.length; i < ilim; i++ ) {\n                var atom = me.atoms[i];\n                if ( atom == undefined )\n                    continue;\n                if ( atom.x == undefined )\n                    continue;\n                if ( atom.resn == \"HOH\" )\n                    continue;\n\n                var v = new TV3( atom.x, atom.y, atom.z );\n                pmvMat.multiplyVector3( v );\n                var r2 = ( v.x - tx ) * ( v.x - tx ) + ( v.y - ty ) * ( v.y - ty );\n                if ( r2 > 0.001 )\n                    continue;\n                if ( v.z < nearest[2].z )\n                    nearest = [r2, atom, v];\n                if ( r2 > 0.001 )\n                    continue;\n                if ( r2 < nearest[0] )\n                    nearest = [r2, atom, v];\n            }\n            var atom = nearest[1];\n            if ( atom == undefined )\n                return;\n\n\n            if ( me.atom_labels[me.atom_label_id( atom )] == undefined ) {\n                me._draw_labels( [atom] );\n\n            } else {\n                me.modelGroup.remove( me.atom_labels[me.atom_label_id( atom )] );\n                delete me.atom_labels[me.atom_label_id( atom )]\n            }\n\n            me.show();\n        });\n\n}\n\n\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/GLmol.js","class Pocket { \n\tconstructor(name, atoms, alpha_spheres, style) {\n\n\tthis.name = name;\n\tthis.atoms = atoms;\n\tthis.alpha_spheres = alpha_spheres;\t\n\tthis.visible = false;\n\n\tthis.style = new $.PocketStyle(style);\n}\n\n\n\trefresh () {\n\t\tthis.glmol.refreshAll()\n\t}\n\trender () {\n\t\tif (this.visible) {\n\t\t\tvar atoms = [];\n\t\t\t\n\t\t\tif (this.style.show_alpha_spheres) {\n\t\t\t\tatoms = this.alpha_spheres;\n\t\t\t} else {\n\t\t\t\tatoms = this.atoms;\n\t\t\t}\n\t\t\tthis.style.render(this.glmol, atoms);\n\t\t}\n\t}\n\tcenter_view(){\n\t\tthis.glmol.zoomInto(this.atoms)\n\t\tthis.glmol.refreshAll();\t\n\t}\n}\nexport default Pocket;\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/Pocket.js","import {GLmol} from '../GLmol.js'\n\nimport {StickStyle} from './style/StickStyle.js'\nimport {SphereStyle} from './style/SphereStyle.js'\nimport {Pocket} from './Pocket.js'\nimport {AtomColorer} from './colorer/AtomColorer.js'\n\nexport class SBGGLMol extends GLmol {\n    constructor( id, supress ) {\n        super( id,supress );/*\n        this.selected_atoms_color = parseInt( \"0x9F00FF\" )\n        this.selected_atoms = [];    \n        this.layers = []\n        this.selected_atoms = []\n        this.atom_labels = []\n        this.selected_atoms_bond_renderer = new StickStyle(\n            new AtomColorer( this.selected_atoms_color ) );\n        this.selected_atoms_renderer = new SphereStyle( new AtomColorer(\n            this.selected_atoms_color ), 0.1 );\n        */\n\n    }\n\n    getAtomsByName( atomlist ) {\n        var ret = []\n        for ( var i in atomlist ) {\n            atom = atomlist[i].split( \".\" );\n            chain = atom[0];\n            resi = atom[1];\n            atom = atom[2];\n\n            for ( var j in this.atoms ) {\n                if ( this.atoms[j].chain == chain && this.atoms[j].resi == resi\n                    && this.atoms[j].atom == atom ) {\n                    ret.push( this.atoms[j].serial );\n                }\n            }\n        }\n        return ret\n    }\n\n    residue_atoms( res_ids ) {\n\n        if ( $.isArray( res_ids ) ) {\n            return $.grep( this.atoms, function( x ) {\n                if ( typeof x != \"undefined\" ) {\n\n                    return res_ids.indexOf( x.chain + \".\" + x.resi ) != -1\n                }\n            });\n        } else {\n            return $.grep( this.atoms, function( x ) {\n                if ( typeof x != \"undefined\" ) {\n\n                    return [x.chain, x.resi].join( \".\" ) == res_ids\n                }\n            });\n        }\n    }\n\n    select_residues( res_ids ) {\n\n        this.selected_atoms = $.map( this.residue_atoms( res_ids ), function( x ) {\n            return x.serial;\n        });\n        if ( this.selected_atoms.length > 0 ) {\n            this.zoomInto( this.selected_atoms )\n            this.refreshAll();\n        }\n\n    }\n\n    chain_atoms( chain ) {\n        var atmIndexes = [];\n        $.each( this.atoms, function( i, atm ) {\n            if ( ( typeof ( atm ) != \"undefined\" ) && ( atm.chain == chain )\n                && ( atm.resn != \"STP\" ) ) {\n                atmIndexes.push( i )\n            }\n        });\n        return this.removeSolvents( atmIndexes )\n    }\n\n    defineRepresentation() {\n        this._render_selected();\n        $.each( this.layers, function( i, layer ) {\n            layer.render();\n        }.bind( this ) );\n\n    }\n    _render_selected() {\n\n        if (this.selected_atoms && this.selected_atoms.length > 0 ) {\n\n            var atomsIndex = this.selected_atoms;\n            this.selected_atoms_renderer.render( this, this.getHetatms( atomsIndex ) );\n            this.selected_atoms_bond_renderer.render( this, this\n                .removeSolvents( atomsIndex ) );\n        }\n    }\n\n    add_to_selected( atom_serial ) {\n        if ( $.isArray( atom_serial ) ) {\n            $.each( atom_serial, function( i, x ) {\n                this.selected_atoms.push( x );\n            }.bind( this ) )\n        } else {\n            this.selected_atoms.push( atom_serial );\n        }\n        this.refreshAll()\n    }\n\n    remove_from_selected( atom_serial ) {\n        if ( $.isArray( atom_serial ) ) {\n            this.selected_atoms = $.grep( this.selected_atoms, function( x ) {\n                return atom_serial.indexOf( x ) == -1\n            });\n        } else {\n            this.selected_atoms = $.grep( this.selected_atoms, function( x ) {\n                return x != atom_serial\n            });\n        }\n        this.refreshAll()\n    }\n    clear_selection() {\n        this.selected_atoms = [];\n        this.refreshAll()\n    }\n    select_by_atom_name( atom_name_list ) {\n        this.selected_atoms = this.getAtomsByName( atom_name_list );\n        this.refreshAll()\n    }\n\n    load_data( data ) {\n        this.data = data;\n        this.loadMoleculeStr( undefined, this.data )\n\n        this.chains = $.unique( $.map( this.atoms, function( atm, i ) {\n            if ( ( typeof ( atm ) != \"undefined\" ) && ( atm.resn != \"STP\" ) )\n                return atm.chain\n        }) );\n        this.chains = $.unique( this.chains.sort() )\n        this.data_loaded()\n        this.refreshAll()\n    }\n    refreshAll() {\n        this.rebuildScene();\n        this.show();\n    }\n\n    add_layer( layer ) {\n        this.layers.push( layer );\n        layer.glmol = this;\n    }\n    add_pdb_str( pdb_str ) {\n\n        var arr = this.data.split( \"\\n\" )\n        var end = arr.length - 3;\n        var foo = [];\n        for ( var i = 0; i <= end; i++ ) {\n            foo.push( arr[i] );\n        }\n\n        this.data = foo.join( '\\n' ) + pdb_str // .join(\"\\n\")\n\n        this.loadMoleculeStr( undefined, this.data );\n        this.refreshAll()\n    }\n\t/**\n\t * Agrego los métodos que necesito al prototipo de GLmol\n\t */\n    removeAlphaSpheres( atomlist ) {\n        var ret = [];\n        for ( var i in atomlist ) {\n            var atom = this.atoms[atomlist[i]];\n            if ( atom == undefined )\n                continue;\n\n            if ( atom.resn != 'STP' )\n                ret.push( atom.serial );\n        }\n        return ret;\n    };\n\n    getAlphaSpheres( atomlist ) {\n\n        var ret = [];\n        var alpha_pol = [];\n        var alpha_apol = [];\n        for ( var i in atomlist ) {\n            var atom = this.atoms[atomlist[i]];\n            if ( atom == undefined )\n                continue;\n\n            if ( atom.resn == 'STP' ) {\n                if ( atom.atom == 'POL' ) {\n                    alpha_pol.push( atom.serial )\n                } else if ( atom.atom == 'APOL' ) {\n                    alpha_apol.push( atom.serial )\n                }\n            }\n        }\n        return new Array( alpha_pol, alpha_apol );\n    };\n    chain_layers() {\n\n        return $.grep( this.layers, function( l ) {\n            return !( l instanceof Pocket )\n        });\n    }\n    pocket_layers() {\n\n        return $.grep( this.layers, function( l ) {\n            return ( l instanceof Pocket )\n        });\n    }\n\n    colorByAtomName( atomlist, residueColors ) {\n        for ( var i in atomlist ) {\n            var atom = this.atoms[atomlist[i]];\n            if ( atom == undefined )\n                continue;\n\n            c = residueColors[atom.atom]\n            if ( c != undefined )\n                atom.color = c;\n        }\n    };\n\n    draw_labels( atoms_id ) {\n        var me = this;\n        this._draw_labels( $.map( atoms_id, atom_id => me.atoms[atom_id] ) )\n    }\n\n    _draw_labels( atoms ) {\n        var me = this;\n        $.each( atoms, function( i, atom ) {\n            var bb = me.billboard( me.createTextTex( me.atom_label_id( atom ), \"30\",\n                \"#ffffff\" ) );\n            bb.position.set( atom.x, atom.y, atom.z );\n            me.atom_labels[me.atom_label_id( atom )] = bb;\n            me.modelGroup.add( bb );\n        }.bind( this ) );\n\n    }\n    atom_label_id( atom ) {\n        // atom.chain + \":\" + ... + \":\" + atom.atom\n        return  atom.resn + \":\" + atom.resi            ;\n    }\n\n    _init_click_event() {\n        var me = this;\n        $( this.container ).bind(\n            'mouseup touchend',\n            function( ev ) {\n                me.isDragging = false;\n\n                me.adjustPos( ev );\n                var x = ev.x, y = ev.y;\n                if ( x == undefined )\n                    return;\n                var dx = x - me.mouseStartX, dy = y - me.mouseStartY;\n                var r = Math.sqrt( dx * dx + dy * dy );\n                if ( r > 2 )\n                    return;\n                x -= me.container.position().left;\n                y -= me.container.position().top;\n\n                x = ev.offsetX\n                y = ev.offsetY\n\n                var mvMat = new THREE.Matrix4().multiply(\n                    $.glmol.camera.matrixWorldInverse,\n                    me.modelGroup.matrixWorld );\n                var pmvMat = new THREE.Matrix4().multiply(\n                    $.glmol.camera.projectionMatrix, mvMat );\n                var pmvMatInv = new THREE.Matrix4().getInverse( pmvMat );\n                var tx = x / me.WIDTH * 2 - 1, ty = 1 - y / me.HEIGHT * 2;\n                var nearest = [1, undefined, new TV3( 0, 0, 1000 )];\n\n                for ( var i = 0, ilim = me.atoms.length; i < ilim; i++ ) {\n                    var atom = me.atoms[i];\n                    if ( atom == undefined )\n                        continue;\n                    if ( atom.x == undefined )\n                        continue;\n                    if ( atom.resn == \"HOH\" )\n                        continue;\n\n                    var v = new TV3( atom.x, atom.y, atom.z );\n                    pmvMat.multiplyVector3( v );\n                    var r2 = ( v.x - tx ) * ( v.x - tx ) + ( v.y - ty ) * ( v.y - ty );\n                    if ( r2 > 0.001 )\n                        continue;\n                    if ( v.z < nearest[2].z )\n                        nearest = [r2, atom, v];\n                    if ( r2 > 0.001 )\n                        continue;\n                    if ( r2 < nearest[0] )\n                        nearest = [r2, atom, v];\n                }\n                var atom = nearest[1];\n                if ( atom == undefined )\n                    return;\n\n\n                if ( me.atom_labels[me.atom_label_id( atom )] == undefined ) {\n                    me._draw_labels( [atom] );\n\n                } else {\n                    me.modelGroup.remove( me.atom_labels[me.atom_label_id( atom )] );\n                    delete me.atom_labels[me.atom_label_id( atom )]\n                }\n\n                me.show();\n            });\n\n    };\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/SBGGLMol.js","export class Layer {\n    constructor( name, atoms, style, hetatm ) {\n        this.name = name;\n        this.atoms = atoms;\n        this.style = style;\n        this.visible = true;\n        this.hetatm = hetatm;\n        this.show_labels = false;\n    }\n\n\n    refresh() {\n        this.glmol.refreshAll()\n    }\n    render() {\n        if ( this.visible ) {\n            if ( this.show_labels ) {\n                this.glmol.draw_labels( this.atoms )\n            }\n\n            this.style.render( this.glmol, this.atoms );\n        }\n    }\n    center_view() {\n        this.glmol.zoomInto( this.atoms )\n        this.glmol.refreshAll();\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/Layer.js","export class CartoonStyle {\n    constructor( colorer, curveWidth, thickness ) {\n        this.colorer = colorer;\n        this.curveWidth = curveWidth;\n        this.thickness = thickness;\n    }\n\n\n    render( glmol, atoms ) {\n        this.colorer.color( glmol, atoms )\n        glmol.drawCartoon( glmol.modelGroup, atoms, this.curveWidth,\n            this.thickness );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/style/CartoonStyle.js","// var THREE = require('three');\nvar THREE = window.THREE;\n\nTHREE.ShaderLib.lambert.fragmentShader = THREE.ShaderLib.lambert.fragmentShader.replace('gl_FrontFacing', 'true');\nlet replaceValue = '#ifdef DOUBLE_SIDED\\n if (transformedNormal.z < 0.0) vLightFront = vLightBack;\\n #endif\\n }';\n\nTHREE.ShaderLib.lambert.vertexShader = THREE.ShaderLib.lambert.vertexShader.replace(/\\}$/, replaceValue);\n\nTHREE.Geometry.prototype.colorAll = function (color) {\n for (let i = 0; i < this.faces.length; i++) {\n  this.faces[i].color = color;\n }\n};\n\nTHREE.Matrix4.prototype.isIdentity = function () {\n for (let i = 0; i < 4; i++) {\n  for (let j = 0; j < 4; j++) {\n   if (this.elements[i * 4 + j] !== (i === j) ? 1 : 0) return false;\n  }}\n return true;\n};\n\nexport * from './GLmol.js';\nexport * from './model/SBGGLMol.js';\nexport * from './model/Layer.js';\nexport * from './utils/SBGBuilder.js';\nexport * from './model/colorer/ByAtomColorer.js';\nexport * from './model/style/StickStyle.js';\nexport * from './model/colorer/AtomColorer.js';\nexport * from './model/style/SphereStyle.js';\nexport * from './model/style/CartoonStyle.js';\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import {SBGParser} from './SBGParser.js'\nimport {SBGGLMol} from '../model/SBGGLMol.js'\nimport {GLmol} from '../GLmol.js'\nimport {Pocket} from '../model/Pocket.js'\nimport {Layer} from '../model/Layer.js'\n\nimport {CartoonStyle} from '../model/style/CartoonStyle.js'\nimport {StickStyle} from '../model/style/StickStyle.js'\nimport {SphereStyle} from '../model/style/SphereStyle.js'\nimport {AtomColorer} from '../model/colorer/AtomColorer.js'\n\nexport class SBGBuilder {\n\tconstructor() {\n\t\t\n\tthis.default_chain_colors = [ parseInt('0xDA9629'), parseInt('0xDA2929'),\n\t\t\tparseInt('0x29DA4F'), parseInt('0x294CDA'), \n\t\t\tparseInt('0x3A9629'), parseInt('0x29DA40'),\n\t\t\tparseInt('0xDA0029'), parseInt('0x204C0A'),\n\t\t\tparseInt('0xDA9620'), parseInt('0xDA2920'),\n\t\t\tparseInt('0x29DA40'), parseInt('0x294CD0'), \n\t\t\tparseInt('0x3A9620'), parseInt('0x29DA49'),\n\t\t\tparseInt('0xDA0020'), parseInt('0x204C00'),\n\t\t\t\n\t\t\tparseInt('0xDA9629'), parseInt('0xDA2929'),\n\t\t\tparseInt('0x29DA4F'), parseInt('0x294CDA'), \n\t\t\tparseInt('0x3A9629'), parseInt('0x29DA40'),\n\t\t\tparseInt('0xDA0029'), parseInt('0x204C0A'),\n\t\t\tparseInt('0xDA9620'), parseInt('0xDA2920'),\n\t\t\tparseInt('0x29DA40'), parseInt('0x294CD0'), \n\t\t\tparseInt('0x3A9620'), parseInt('0x29DA49'),\n\t\t\tparseInt('0xDA0020'), parseInt('0x204C00')\n\t\t\t]\n\t\n\tthis._urls = [];\n\tthis._data = null;\n\tthis._download_fail = function(e) {\n\t\talert(\"Error loading \" + this._urls + \" -> \" + e)\n\t};\n\tthis._data_loaded_fn = function(sbgglmol) {\n\t\t\n\t}\n\tthis._div_name = null;\n\tthis.parser = new SBGParser();\n\tthis.pockets_to_load = [];\n\tthis.pockets_data = [];\n\t\n\tthis.pdb_strs_to_add = [];\n\t\n}\n\n\tbuild () {\n\t\tif (this._div_name == null) {\n\t\t\tthrow \"div not initialized...\";\n\t\t}\n\t\t\n\t\tif (this._urls.length > 0){\n\t\t\tthis._load_urls(this._urls.reverse())\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\tif (this._data == null) {\n\t\t\tthrow \"pdb data not initialized\"\n\t\t} else {\n\t\t\treturn this._build();\n\t\t}\t\n\t}\n\t_load_urls(urls){\n\t\tif (urls.length > 0 ){\n\t\t\tvar url_handler = urls.pop()\n\t\t\tif (url_handler.length == 2){\n\t\t\t\t$.get(url_handler[0]).\n\t\t\t\tdone( function(data){\n\t\t\t\t\turl_handler[1](data);\n\t\t\t\t\tthis._load_urls(urls);\n\t\t\t\t}.bind(this) ).\n\t\t\t\tfail(this._download_fail.bind(this));\t\n\t\t\t} else {\n\t\t\t\tthis._execute_cascade_url(url_handler[0].reverse(),url_handler[1],url_handler[2],urls);\n\t\t\t}\n\t\t\t\t\n\t\t}\t\t\n\t}\n\t_execute_cascade_url (urls,handler,params,url_groups){\n\t\tif(urls.length == 0){\t\n\t\t\t\n\t\t\thandler.apply(this,params)\n\t\t\tif(url_groups.length == 0){\n\t\t\t\tthis._build();\n\t\t\t} else {\n\t\t\t\tthis._load_urls(url_groups);\n\t\t\t}\n\t\t} else {\n\t\t\tvar url = urls.pop();\n\t\t\t$.get(url).\n\t\t\t\tsuccess(function(data){\n\t\t\t\t\tparams.push(data);\n\t\t\t\t\tthis._execute_cascade_url(urls,handler,params,url_groups)\n\t\t\t\t}.bind(this)).\n\t\t\t\tfail(this._download_fail.bind(this));\n\t\t}\n\t}\n\tdata (data){\n\t\tthis._data = data;\n\t\treturn this;\n\t}\n\tdiv (div_name) {\n\t\tthis._div_name = div_name\n\t\treturn this;\n\t}\n\tpdb (pdb) {\t\t\n\t\tthis.url('http://www.rcsb.org/pdb/files/' + pdb + '.pdb');\n\t\treturn this;\n\t}\n\turl (url) {\n\t\tthis._urls = [[url,this._build_first_phase.bind(this)]];\n\t\treturn this;\n\n\t}\n\tlayer_list(div_id){\n\t\tthis.layer_list_id =  div_id ;\t\t\n\t\treturn this\n\t}\n\tpocket_url (pocket_name,url_pdb_str_residues,url_pdb_str_alphaSpheres){\n\t\tthis.pdb_strs_to_add.push(url_pdb_str_alphaSpheres)\n\t\tthis._urls.push([[url_pdb_str_residues,url_pdb_str_alphaSpheres],this._handle_pocket_data.bind(this),[pocket_name]]);\n\t\treturn this;\n\t\t\n\t}\n\tadd_pdb_str_data_url(url){\n\t\tthis.pdb_strs_to_add.push(url)\n\t\treturn this;\n\t}\n\t_handle_pocket_data (pocket_name,pocket_atoms_str,pocket_alpha_spheres_str){\n\t\tthis.pockets_data.push([pocket_name,pocket_atoms_str,pocket_alpha_spheres_str])\n\t}\n\tload_pocket(glmol,pocket_name,pocket_atoms_str,pocket_alpha_spheres_str){\n\t\t\n\t\tglmol.add_pdb_str(pocket_alpha_spheres_str);\n\t\t\n\t\tvar pocket_atom_index_list = pocket_atoms_str;// this.parser.atomIds_from_pdb(pocket_atoms_str) ;\n\t\tvar alpha_spheres_index_list =  this.parser.atomIds_from_pdb(pocket_alpha_spheres_str)  ;\n\t\t\n\t\tvar style = new StickStyle(\n\t\t\t\tnew AtomColorer(glmol.selected_atoms_color));\n\t\tvar pocket = new Pocket(pocket_name, pocket_atom_index_list,\n\t\t\t\talpha_spheres_index_list, style);\n\t\tglmol.add_layer(pocket)\n\t}\n\t_load_data (data){\n\t\tthis._data = data;\n\t\tthis._build();\n\t}\n\t_build_first_phase(data){\n\t\tthis.data(data);\n\t\tthis.glmol = new GLmol(this._div_name, true);\n\t\tthis.glmol.data_loaded = function(glmol) {}\n\t\tthis.glmol.load_data(this._data)\n\t}\n\t_build () {\t\t\n\t\t\tif (this.glmol == null){\n\t\t\t\tthis.glmol = new GLmol(this._div_name, true);\n\t\t\t\tthis.glmol.layers = []\n\t\t\t\tthis.glmol.selected_atoms = []\n\t\t\t\tthis.glmol.atom_labels = []\n\t\t\t\tthis.glmol._init_click_event()\n\t\t\t}\n\t\t\tvar glmol = this.glmol;\n\t\t\tglmol.data_loaded = function() {\n\t\t\t\tthis._default_init(glmol);\n\t\t\t\tthis._data_loaded_fn(glmol);\n\t\t\t}.bind(this);\t\t\n\t\t\tglmol.load_data(this._data);\n\t\t\t$.each(this.pdb_strs_to_add,function(i,pdb_str){\n\t\t\t\tglmol.add_pdb_str (pdb_str);\n\t\t\t});\n\t\t\treturn glmol\n\t\t\n\n\t}\n\t_default_init (glmol) {\t\t\n\t\t\n\t\tthis._init_chains(glmol);\n\t\tthis._init_heatoms(glmol);\n\t\t\n\t\tthis._init_pockets(glmol);\n\t\tthis._init_controls(glmol);\n\t\t\n\t}\n\t_init_pockets(glmol){\n\t\t\n\t\tif(this.pockets_data.length > 0) {\n\t\t\t\n\t\t\t$.each(this.pockets_data,function(i,pocket_arr){\n\t\t\t\t\n\t\t\t\tvar pocket_name = pocket_arr[0]; \n\t\t\t\tvar pocket_atoms_str = pocket_arr[1];\n\t\t\t\tvar raw_str_alpha_spheres = pocket_arr[2];\t\n\t\t\t\t\n\t\t\t\tvar str_alpha_spheres = this.parser.alpha_spheres_from_pdb(raw_str_alpha_spheres);\n\t\t\t\tthis.load_pocket(glmol,pocket_name,pocket_atoms_str,str_alpha_spheres);\n\t\t\t\t\n\t\t\t}.bind(this));\n\t\t\t\n\t\t\n\t\t}\n\t\t\n\t}\n\t_init_controls(glmol){\n\t\t\n\t\tif(this.layer_list_id != null ){\n\t\t\tthis._layer_list = new $.UILayerList($('#'  + this.layer_list_id ), glmol);\n\t\t\tthis._layer_list.init();\n\t\t}\t\t\n\t}\n\t/**\n\t * Carga un layer por cadena\n\t */\n\t_init_chains (glmol) {\n\t\t\n\t\t$.each(glmol.chains, function(i, chain) {\n\t\t\t\t//if (chain != \" \") {\n\t\t\t\t// BORRAR esta cond es para que no cuente a las alpha spheres\n\t\t\t\t// como un layer mas, si hay un modelo esto no anda\n\t\t\t\tvar chain_style = new CartoonStyle(new $.AtomColorer(\n\t\t\t\t\t\tthis.default_chain_colors[i]), 0.2, 0.2);\n\t\t\t\tvar layer = new Layer(chain, glmol.chain_atoms(chain),\n\t\t\t\t\t\tchain_style, false);\n\t\t\t\tglmol.add_layer(layer)\n\t\t\t\n\t\t}.bind(this))\n\t}\n\t/**\n\t * Carga el layer de heatoms\n\t */\n\t_init_heatoms (glmol) {\n\t\tvar heatoms = glmol.removeAlphaSpheres( glmol.removeSolvents(glmol.getHetatms(glmol.getAllAtoms())));\n\t\tif (heatoms.length > 0) {\n\t\t\tstyle = new SphereStyle(new ByAtomColorer({}), 1)\n\t\t\tlayer = new Layer('heatoms', heatoms, style, true);\n\t\t\tglmol.add_layer(layer)\n\t\t}\n\t}\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/SBGBuilder.js","export class SBGParser {\n\t_atom_from_line(line){\n\n\t\treturn parseInt(line.substr(6, 5));\n\t}\n\t_residue_from_line(line){\n\t\treturn line.substring(22, 26).trim();\n\t}\n\tisATOMLine ( pdbLine ) {\n\treturn pdbLine.substring(0, 4) == 'ATOM';\n\t}\n\tisHETATMLine( pdbLine ) {\n\t\treturn pdbLine.substring(0, 6) == 'HETATM';\n\t}\n\tisAlphaSphereLine ( pdbLine ) {\t\t\n\t\treturn pdbLine.substr(17, 3) == 'STP';\n\t}\n\tatomIds_from_pdb(pdb_str){\t\t\n\t\tvar atom_index_list = [];\n\t\t$.each(pdb_str.split(\"\\n\"), function(i, line) {\n\t\t\tif (this.isATOMLine(line) || this.isHETATMLine(line)){\n\t\t\t\tatomSeq = this._atom_from_line(line);\n\t\t\t\tatom_index_list.push(atomSeq);\n\t\t\t}\n\t\t}.bind(this));\n\t\treturn atom_index_list\n\t}\n\t/**\n\t * Return a map of pocketNumber:pocketAlphaSpheresPDBString\n\t */\n\tmap_alpha_spheres_from_pdb(pdb_str,pocket_numbers){\n\t\t/**\n\t\t * Alpha sphere \"residue\" is the pocket number\n\t\t */\t\t\n\t\t\n\t\tvar pocket_alpha_spheres_str = {};\n\t\t$.each(pocket_numbers,function(j,pocket_number){\n\t\t\tpocket_alpha_spheres_str[pocket_number + 1] = \"\";\n\t\t});\n\t\t\n\t\t\n\t\t$.each(pdb_str.split(\"\\n\"), function(i,\n\t\t\t\tline) {\n\t\t\tif (this.isAlphaSphereLine(line)) {\n\t\t\t\tvar pocket_number = parseInt( this._residue_from_line(line) )  ;\n\t\t\t\tif ( $.isDefAndNotNull(pocket_alpha_spheres_str[pocket_number  +1])){\n\t\t\t\t\tpocket_alpha_spheres_str[pocket_number + 1] += line + \"\\n\";\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}.bind(this));\n\t\treturn pocket_alpha_spheres_str;\n\t}\n\talpha_spheres_from_pdb(pdb_str){\n\t\tvar pocket_alpha_spheres = [];\n\t\t$.each(pdb_str.split(\"\\n\"), function(i,\n\t\t\t\tline) {\n\t\t\t\n\t\t\tif (this.isAlphaSphereLine(line)) {\t\t\t\t\n\t\t\t\tpocket_alpha_spheres.push(line);\n\t\t\t}\n\t\t}.bind(this));\n\t\treturn pocket_alpha_spheres.join(\"\\n\");\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/SBGParser.js","export class ByAtomColorer {\n    constructor( color_map ) {\n\n        if ( color_map ) {\n            this.atom_color_map = color_map;\n        } else {\n            this.atom_color_map = {\n                \"H\": 0xCCCCCC, \"C\": 0xAAAAAA, \"O\": 0xCC0000, \"N\": 0x0000CC, \"S\": 0xCCCC00, \"P\": 0x6622CC,\n                \"F\": 0x00CC00, \"CL\": 0x00CC00, \"BR\": 0x882200, \"I\": 0x6600AA,\n                \"FE\": 0xCC6600, \"CA\": 0x8888AA\n            }\n        }\n\n    }\n\n\n    color( glmol, atoms ) {\n        glmol.colorByAtom( atoms, this.atom_color_map );\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/colorer/ByAtomColorer.js"],"sourceRoot":""}